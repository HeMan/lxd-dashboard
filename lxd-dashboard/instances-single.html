<!--
LXDWARE LXD Dashboard - A web-based interface for managing LXD servers
Copyright (C) 2020-2021  LXDWARE.COM

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <link rel="icon" type="image/png" href="assets/images/logo-light.svg">

  <title>LXD Dashboard</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="vendor/fonts/nunito.css" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="vendor/sb-admin-2/css/sb-admin-2.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- Custom styles for this page -->
  <link href="vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">
  <link rel="stylesheet" href="vendor/xterm/css/xterm.css"/>

</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-dark sidebar sidebar-dark accordion" id="accordionSidebar">
      
      <div id="sidebarLinks"></div>

      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block"> 

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>
    </ul>
    <!-- End of Sidebar -->


    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

          <!-- Sidebar Toggle (Topbar) -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>


          <!-- Topbar Notification -->
          <div class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
            <ul class="navbar-nav ml-auto"> 

              <li>
                <div class="nav-item spinner-border m-3" role="status" style="display:none;" id="spinner">
                  <span class="nav-item sr-only">Loading...</span>
                </div>
              </li>
  
              <li class="nav-item dropdown no-arrow" id="notificationArea" style="display: none;">
                <div class="nav-link dropdown-toggle">
                  <span id="notification" class="mr-2 d-none d-lg-inline text-gray-600">Notification</span>
                </div>
              </li>
              
            </ul>
          </div>
          

          <!-- Topbar Navbar -->
          <ul class="navbar-nav ml-auto"> 

            <li class="nav-item dropdown" id="remoteListNav">
            </li>

            <li class="nav-item dropdown" id="projectListNav">
            </li>

            <div class="topbar-divider d-none d-sm-block"></div>

            <!-- Nav Item - User Information -->
            <li class="nav-item dropdown no-arrow">
              <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-user-circle fa-1x fa-fw mr-2 text-gray-600"></i>
                <span id="username" class="mr-2 d-none d-lg-inline text-gray-600"></span>
              </a>
              <!-- Dropdown - User Information -->
              <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                <a class="dropdown-item" href="user-profile.html">
                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                  Profile
                </a>
                <a class="dropdown-item" href="settings.html">
                  <i class="fas fa-cog fa-sm fa-fw mr-2 text-gray-400"></i>
                  Settings
                </a>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#aboutModal">
                  <i class="fas fa-info-circle fa-sm fa-fw mr-2 text-gray-400"></i>
                  About
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#" onclick="logout()">
                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                  Logout
                </a>
              </div>
            </li>

          </ul>

        </nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid">

          <!-- BreadCrumb -->
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#" id="remoteBreadCrumb"></a></li>
              <li class="breadcrumb-item"><a href="#" id="instancesBreadCrumb"></a></li>
              <li class="breadcrumb-item active" aria-current="page" id="instanceBreadCrumb"></li>
            </ol>
          </nav>

          <div class="col-12">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between border-bottom-0">
              <h6 class="m-0 font-weight-bold text-primary">Instance Details</h6>
              <div class="dropdown no-arrow">
                <a class="dropdown-toggle mr-2" href="#" role="button" id="startLink" onclick="startInstance()" style="display: none;" Title="Start">
                  <i class="fas fa-play fa-lg fa-fw"></i></a>
                <a class="dropdown-toggle mr-2" href="#" role="button" id="stopLink" onclick="stopInstance()" style="display: none;" title="Stop">
                  <i class="fas fa-stop fa-lg fa-fw"></i></a>
                <a class="dropdown-toggle mr-2" href="#" role="button" id="unfreezeLink" onclick="unfreezeInstance()" style="display: none;" title="UnFreeze">
                  <i class="fas fa-pause fa-lg fa-fw"></i></a>
                <a class="dropdown-toggle mr-2" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Actions">
                  <i class="fas fa-bars fa-lg fa-fw"></i></a>
                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                  <!--<div class="dropdown-header">Options:</div>-->
                  <a class="dropdown-item text-primary" href="#" onclick="editInstanceJson()" id="editInstanceOption"><i class="fas fa-edit fa-sm fa-fw mr-2"></i>Edit</a>
                  <a class="dropdown-item text-primary" href="#" onclick="restartInstance()" id="restartInstanceOption"><i class="fas fa-redo fa-sm fa-fw mr-2"></i>Restart</a>
                  <a class="dropdown-item text-primary" href="#" onclick="stopInstanceForcefully()" id="stopInstanceForcefullyOption"><i class="fas fa-plug fa-sm fa-fw mr-2"></i>Force Stop</a>
                  <a class="dropdown-item text-primary" href="#" onclick="freezeInstance()" id="freezeInstanceOption"><i class="fas fa-pause fa-sm fa-fw mr-2"></i>Freeze</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#snapshotInstanceModal" id="snapshotInstanceOption"><i class="fas fa-clone fa-sm fa-fw mr-2"></i>Snapshot</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#attachInstanceProfileModal" id="attachInstanceProfileOption"><i class="fas fa-address-card fa-sm fa-fw mr-2"></i>Attach Profile</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#renameInstanceModal" id="renameInstanceOption"><i class="fas fa-edit fa-sm fa-fw mr-2"></i>Rename</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#copyInstanceModal" id="copyInstanceOption"><i class="fas fa-copy fa-sm fa-fw mr-2"></i>Copy</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#migrateInstanceModal" id="migrateInstanceOption"><i class="fas fa-suitcase fa-sm fa-fw mr-2"></i>Migrate</a>
                  <a class="dropdown-item text-primary" href="#" onclick="initializeCreateBackup()" id="backupInstanceOption"><i class="fas fa-save fa-sm fa-fw mr-2"></i>Backup</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#publishInstanceModal" id="publishInstanceOption"><i class="fas fa-box-open fa-sm fa-fw mr-2"></i>Publish</a>
                  <a class="dropdown-item text-primary" href="#" data-toggle="modal" data-target="#deleteInstanceModal" id="deleteInstanceOption"><i class="fas fa-trash-alt fa-sm fa-fw mr-2"></i>Delete</a>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12">

            <div class="row">

              <div class="col-2 border-right">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                  <a class="nav-link active" id="v-pills-general-tab" data-toggle="pill" href="#v-pills-general" role="tab" aria-controls="v-pills-general" aria-selected="false">General</a>
                  <a class="nav-link" id="v-pills-snapshots-tab" data-toggle="pill" href="#v-pills-snapshots" role="tab" aria-controls="v-pills-snapshots" aria-selected="false">Snapshots</a>
                  <a class="nav-link" id="v-pills-profiles-tab" data-toggle="pill" href="#v-pills-profiles" role="tab" aria-controls="v-pills-profiles" aria-selected="false">Profiles</a>
                  <a class="nav-link" id="v-pills-interfaces-tab" data-toggle="pill" href="#v-pills-interfaces" role="tab" aria-controls="v-pills-interfaces" aria-selected="false">Interfaces</a>
                  <a class="nav-link" id="v-pills-network-devices-tab" data-toggle="pill" href="#v-pills-network-devices" role="tab" aria-controls="v-pills-network-devices" aria-selected="false">Network Devices</a>
                  <a class="nav-link" id="v-pills-disk-devices-tab" data-toggle="pill" href="#v-pills-disk-devices" role="tab" aria-controls="v-pills-disk-devices" aria-selected="false">Disk Devices</a>
                  <a class="nav-link" id="v-pills-proxy-devices-tab" data-toggle="pill" href="#v-pills-proxy-devices" role="tab" aria-controls="v-pills-proxy-devices" aria-selected="false">Proxy Devices</a>
                  <a class="nav-link" id="v-pills-backups-tab" data-toggle="pill" href="#v-pills-backups" role="tab" aria-controls="v-pills-backups" aria-selected="false">Backups</a>
                  <a class="nav-link" id="v-pills-logs-tab" data-toggle="pill" href="#v-pills-logs" role="tab" aria-controls="v-pills-logs" aria-selected="false">Logs</a>
                  <a class="nav-link" id="v-pills-console-tab" data-toggle="pill" href="#v-pills-console" role="tab" aria-controls="v-pills-console" aria-selected="false">Console</a>
                  <a class="nav-link" id="v-pills-exec-tab" data-toggle="pill" href="#v-pills-exec" role="tab" aria-controls="v-pills-exec" aria-selected="false">Exec</a>
                </div>
              </div>

              <div class="col-10">
                <div class="tab-content" id="v-pills-tabContent">
                  <div class="tab-pane fade show active" id="v-pills-general" role="tabpanel" aria-labelledby="v-pills-general-tab">
                    <div class="row">

                      <!-- General Tab -->
                      <div class="col-xl-5 col-lg-12">
                        <div class="card shadow mb-4 h-100">
                          <!-- Card Header - Dropdown -->
                          <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                            <h6 class="m-0 font-weight-bold text-primary">Instance Information</h6>
                            <div class="dropdown no-arrow">
                              <a class="dropdown-toggle" href="#" role="button" onclick="editInstanceJson()" id="snapshotConfigurationLink" title="Edit Instance Information">
                                <i class="fas fa-edit fa-1x fa-fw"></i>
                              </a>
                            </div>
                          </div>
                          <!-- Card Body -->
                          <div class="card-body">
                            <div class="row">
                              <div class="col-12">
                                <h5><strong>Basic Information</strong></h5>
                                <div><strong>Name</strong>: <span id="name"></span></div>
                                <div><strong>Description</strong>: <span id="description"></span></div>
                                <div><strong>Type</strong>: <span id="type"></span></div>
                                <div><strong>Status</strong>: <span id="status"></span></div>
                                <div><strong>Image</strong>: <span id="image"></span></div>
                                <div><strong>Location</strong>: <span id="location"></span></div>
                                <div><strong>Created</strong>: <span id="created"></span></div>
                                <br><br>
                                <h5><strong>State Information</strong></h5>
                                <div><strong>Memory</strong>: <span id="memory"></span></div>
                                <div><strong>Swap</strong>: <span id="swap"></span></div>
                                <div><strong>PID</strong>: <span id="pid"></span></div>
                                <div><strong>Processes</strong>: <span id="processes"></span></div>
                                <div><strong>IPv4 Addresses</strong>: <span id="ipv4Addresses"></span></div>
                                <div><strong>IPv6 Addresses</strong>: <span id="ipv6Addresses"></span></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- End General Tab -->

                      <div class="col-xl-7 col-lg-12">
                        <div class="row">

                          <!-- Security Configuration Card -->
                          <div class="col-6">
                            <div class="card shadow mb-4">
                              <!-- Card Header - Dropdown -->
                              <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Security Configuration</h6>
                                <div class="dropdown no-arrow">
                                  <a class="dropdown-toggle" href="#" role="button" onclick="editSecurityConfiguration()" id="securityConfigurationLink" title="Edit Security Configuration">
                                    <i class="fas fa-edit fa-1x fa-fw"></i>
                                  </a>
                                </div>
                              </div>
                              <!-- Card Body -->
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-12">
                                    <div><strong>security.nesting</strong>: <span id="securityNesting"></span></div>
                                    <div><strong>security.privileged</strong>: <span id="securityPrivileged"></span></div>
                                    <div><strong>security.protection.delete</strong>: <span id="securityProtectionDelete"></span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End Security Configuration Card -->

                          <!-- CPU Configuration Card -->
                          <div class="col-6">
                            <div class="card shadow mb-4">
                              <!-- Card Header - Dropdown -->
                              <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">CPU Limits</h6>
                                <div class="dropdown no-arrow">
                                  <a class="dropdown-toggle" href="#" role="button"  onclick="editCpuLimits()" id="cpuLimitsLink" title="Edit CPU Limits">
                                    <i class="fas fa-edit fa-1x fa-fw"></i>
                                  </a>
                                </div>
                              </div>
                              <!-- Card Body -->
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-12">
                                    <div><strong>limits.cpu</strong>: <span id="limitsCpu"></span></div>
                                    <div><strong>limits.cpu.allowance</strong>: <span id="limitsCpuAllowance"></span></div>
                                    <div><strong>limits.cpu.priority</strong>: <span id="limitsCpuPriority"></span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End CPU Configuration Card -->

                          <!-- Boot Configuration Card -->
                          <div class="col-6">
                            <div class="card shadow mb-4">
                              <!-- Card Header - Dropdown -->
                              <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Boot Configuration</h6>
                                <div class="dropdown no-arrow">
                                  <a class="dropdown-toggle" href="#" role="button" onclick="editBootConfiguration()" id="bootConfigurationLink" title="Edit Boot Configuration">
                                    <i class="fas fa-edit fa-1x fa-fw"></i>
                                  </a>
                                </div>
                              </div>
                              <!-- Card Body -->
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-12">
                                    <div><strong>boot.autostart</strong>: <span id="bootAutostart"></span></div>
                                    <div><strong>boot.autostart.delay</strong>: <span id="bootAutostartDelay"></span></div>
                                    <div><strong>boot.autostart.priority</strong>: <span id="bootAutostartPriority"></span></div>
                                    <div><strong>boot.host_shutdown_timeout</strong>: <span id="bootHostShutdownTimeout"></span></div>
                                    <div><strong>boot.stop.priority</strong>: <span id="bootStopPriority"></span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End Boot Configuration Card -->

                          <!-- Memory Configuration Card -->
                          <div class="col-6">
                            <div class="card shadow mb-4">
                              <!-- Card Header - Dropdown -->
                              <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Memory Limits</h6>
                                <div class="dropdown no-arrow">
                                  <a class="dropdown-toggle" href="#" role="button" onclick="editMemoryLimits()" id="memoryLimitsLink" title="Edit Memory Limits">
                                    <i class="fas fa-edit fa-1x fa-fw"></i>
                                  </a>
                                </div>
                              </div>
                              <!-- Card Body -->
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-12">
                                    <div><strong>limits.memory</strong>: <span id="limitsMemory"></span></div>
                                    <div><strong>limits.memory.enforce</strong>: <span id="limitsMemoryEnforce"></span></div>
                                    <div><strong>limits.memory.hugepages</strong>: <span id="limitsMemoryHugepages"></span></div>
                                    <div><strong>limits.memory.swap</strong>: <span id="limitsMemorySwap"></span></div>
                                    <div><strong>limits.memory.swap.priority</strong>: <span id="limitsMemorySwapPriority"></span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End Memory Configuration Card -->

                          <!-- Snapshot Configuration Card -->
                          <div class="col-6">
                            <div class="card shadow">
                              <!-- Card Header - Dropdown -->
                              <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Snapshot Configuration</h6>
                                <div class="dropdown no-arrow">
                                  <a class="dropdown-toggle" href="#" role="button" onclick="editSnapshotConfiguration()" id="snapshotConfigurationLink" title="Edit Snapshot Configuration">
                                    <i class="fas fa-edit fa-1x fa-fw"></i>
                                  </a>
                                </div>
                              </div>
                              <!-- Card Body -->
                              <div class="card-body">
                                <div class="row">
                                  <div class="col-12">
                                    <div><strong>snapshots.schedule</strong>: <span id="snapshotsSchedule"></span></div>
                                    <div><strong>snapshots.schedule.stopped</strong>: <span id="snapshotsScheduleStopped"></span></div>
                                    <div><strong>snapshots.pattern</strong>: <span id="snapshotsPattern"></span></div>
                                    <div><strong>snapshots.expiry</strong>: <span id="snapshotsExpiry"></span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End Snapshot Configuration -->

                        </div>
                                      
                      </div>

                    </div>

                  </div>


                  <div class="tab-pane fade" id="v-pills-snapshots" role="tabpanel" aria-labelledby="v-pills-snapshots-tab">
                    <!-- Snapshot List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header - Dropdown -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Snapshots</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" data-toggle="modal" data-target="#snapshotInstanceModal" title="Create Snapshot" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Snapshot</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="snapshotTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Snapshot List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-profiles" role="tabpanel" aria-labelledby="v-pills-profiles-tab">
                    <!-- Profiles List -->
                    <div class="card border-light mb-4">
                      <!-- Card Header - Dropdown -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Profiles</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" data-toggle="modal" data-target="#attachInstanceProfileModal" title="Attach Profile" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Profile</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="profileTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Profiles List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-interfaces" role="tabpanel" aria-labelledby="v-pills-interfaces-tab">
                    <!-- Interfaces List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Interfaces</h6>
                        <div class="dropdown no-arrow">
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="interfaceTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Interfaces List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-network-devices" role="tabpanel" aria-labelledby="v-pills-network-devices-tab">
                    <!-- Network Devices List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Network Devices</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" onclick="loadAddNetworkDeviceModal()" title="Add Network Device" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Network Device</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="networkDeviceTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Network Devices List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-disk-devices" role="tabpanel" aria-labelledby="v-pills-disk-devices-tab">
                    <!-- Disk Device List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Disk Devices</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" onclick="loadAddDiskDeviceModal()" title="Add Disk Device" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Disk Device</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="diskDeviceTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Disk Device List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-proxy-devices" role="tabpanel" aria-labelledby="v-pills-proxy-devices-tab">
                    <!-- Proxy Device List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Proxy Devices</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" data-toggle="modal" data-target="#addProxyDeviceModal" title="Add Proxy Device" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Proxy Device</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="proxyDeviceTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Proxy Device List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-backups" role="tabpanel" aria-labelledby="v-pills-backups-tab">
                    <!-- Backups List -->                      
                    <div class="card border-light mb-4">
                      <!-- Card Header - Dropdown -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Backups</h6>
                        <div class="dropdown no-arrow">
                          <a class="dropdown-toggle mr-2" href="#" onclick="initializeCreateBackup()" title="Create Backup" aria-hidden="true">
                            <i class="fas fa-plus fa-sm fa-fw"></i> Backup</a>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="backupTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Backups List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-logs" role="tabpanel" aria-labelledby="v-pills-logs-tab">
                    <!-- Logs List -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Logs</h6>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div class="table-responsive">
                          <table class="table" id="logTableList" width="100%" cellspacing="0">
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- End Logs List -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-console" role="tabpanel" aria-labelledby="v-pills-console-tab">
                    <!-- Console Tab -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header - Dropdown -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Console</h6>
                        <div class="dropdown no-arrow">
                            <button type="button" class="btn btn-primary" id="startConsoleButton" onclick="establishInstanceWebSocketConsoleConnection()">Start Console</button>
                            <button type="button" class="btn btn-primary" style="display: none;" id="stopConsoleButton" onclick="closeWebSocketConsoleConnection()">Stop Console</button>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div id="terminal-console"></div>
                      </div>
                    </div>
                    <!-- End Console Tab -->
                  </div>
                  <div class="tab-pane fade" id="v-pills-exec" role="tabpanel" aria-labelledby="v-pills-exec-tab">
                    <!-- Exec Tab -->
                    <div class="card mb-4 border-0">
                      <!-- Card Header - Dropdown -->
                      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">Exec</h6>
                        <div class="dropdown no-arrow">
                          <button type="button" class="btn btn-primary" id="startExecButton" onclick="establishInstanceWebSocketExecConnection()">Start Exec</button>
                          <button type="button" class="btn btn-primary" style="display: none;" id="stopExecButton" onclick="closeWebSocketExecConnection()">Stop Exec</button>
                          <select id="execShellInput" class="btn" name="execShellInput">
                            <option value="bash" selected>/bin/bash</option>
                            <option value="sh">/bin/sh</option>
                          </select>
                        </div>
                      </div>
                      <!-- Card Body -->
                      <div class="card-body">
                        <div id="terminal-exec"></div>
                      </div>
                    </div>
                    <!-- End Exec Tab -->
                  </div>
                </div>
              </div>

            </div>

          </div>

        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; lxdware.com 2021</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>


  <!-- New Snapshot Modal-->
  <div class="modal fade" id="snapshotInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Create Snapshot</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Name: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="snapshotName" class="form-control" placeholder="" name="snapshot">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter a unique name to identify this snapshot. If a name is not provided it will be autogenerated.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Stateful:</label>
              <div class="col-7 text-right">
                <div class="form-group">
                  <select id="snapshotStateful" class="form-control" name="snapshotStateful">
                    <option value="false" selected>false</option>
                    <option value="true">true</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select whether or not to create a stateful snapshot. Default: false'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="snapshotInstance()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Rename Instance Modal-->
  <div class="modal fade" id="renameInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Rename Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="newInstanceName" class="form-control" placeholder="">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter in a new name for this instance.'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="renameInstance()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Migrate Instance Modal-->
  <div class="modal fade" id="migrateInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Migrate Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Host:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="selectClusterInput" class="form-control" name="cluster">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Select the cluster member to migrate this instance to.'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="migrateInstance()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Copy Instance Modal-->
  <div class="modal fade" id="copyInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Copy Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="copyName" class="form-control" placeholder="" name="copy">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Enter in the name of the new copied instance.'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="copyInstance()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Create Instance from Snapshot Modal-->
  <div class="modal fade" id="createInstanceFromSnapshotModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Create Instance from Snapshot</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="instanceNameForSnapshotCreate" class="form-control" placeholder="" name="copysnap">
                  <input type="hidden" id="snapNameForSnapshotCreate">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Enter in a name for the new instance.'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="createInstanceFromSnapshot()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Publish Image from Snapshot Modal-->
  <div class="modal fade" id="publishImageFromSnapshotModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Publish Image from Snapshot</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Description: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishSnapshotDescriptionInput" class="form-control" placeholder="" name="description">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in a description for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">OS: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishSnapshotOsInput" class="form-control" placeholder="" name="os">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in the operating system name for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Release: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishSnapshotReleaseInput" class="form-control" placeholder="" name="release">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in the release version for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Public:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="publishSnapshotPublicInput" class="form-control" name="public">
                    <option value="false" selected>false</option>
                    <option value="true">true</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select whether or not this image is public. Default: false'></i>
              </div>
            </div>
            <input type="hidden" id="publishSnapshotHiddenName">
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="publishImageFromSnapshot()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Backup Instance Modal-->
  <div class="modal fade" id="backupInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Backup Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="backupName" class="form-control" placeholder="" name="backupName">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter in the name of the backup. A file extension will be appended to this name.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Instance Only:</label>
              <div class="col-7 text-right">
                <div class="form-group">
                  <select id="backupInstanceOnly" class="form-control" name="backupInstanceOnly">
                    <option value="false" selected>false</option>
                    <option value="true">true</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select whether or not to backup just the instance itself. Default: false'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Optimized Storage:</label>
              <div class="col-7 text-right">
                <div class="form-group">
                  <select id="backupOptimizedStorage" class="form-control" name="backupOptimizedStorage">
                    <option value="false" selected>false</option>
                    <option value="true">true</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select whether or not to optimize storage size. Default: false'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Compression:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="backupCompressionAlgorithm" class="form-control" name="backupCompressionAlgorithm">
                    <option value="bzip2">bzip2</option>
                    <option value="gzip" selected>gzip</option>
                    <option value="lzma">lzma</option>
                    <option value="none">none</option>
                    <option value="xz">xz</option>
                    <option value="zstd">zstd</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select which compression algorithm to use. Default: gzip'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="createBackup()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>
  
  <!-- Delete Instance Modal-->
  <div class="modal fade" id="deleteInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Delete Instance</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">Are you sure you want to delete this instance?</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
          <a class="btn btn-primary" href="#" onclick="deleteInstance()" data-dismiss="modal">Yes</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Attach Profile Modal-->
  <div class="modal fade" id="attachInstanceProfileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Attach Profile</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Profile:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="selectProfileInput" class="form-control" name="profile">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select an existing profile to attach to this instance.'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="attachInstanceProfile()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Add Disk Device Modal-->
  <div class="modal fade" id="addDiskDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add Disk Device</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Device Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="diskNameInput" class="form-control" placeholder="" name="diskNameInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter a unique name to identify this instance device.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Pool:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="diskPoolInput" onchange="changeStorageVolumeInput()" class="form-control" name="diskPoolInput">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='For LXD managed storage volumes, select the storage pool where the source storage volume is located.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Source:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="diskSourceInput" class="form-control" placeholder="" name="diskSourceInput">
                  <select style="display:none;" id="diskSourceSelectInput" class="form-control" name="diskSourceSelectInput">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Select the storage volume or enter the filepath of the storage device.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Path:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="diskPathInput" class="form-control" placeholder="" name="diskPathInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter a filepath for where this disk will be mounted within the instance. For example, /mnt/vol1'></i>
              </div>
            </div>

            <hr>

            <div id="accordionDiskProperties">
              <h2>
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#additionalDiskProperties" aria-expanded="false" aria-controls="additionalDiskProperties">
                  Additional Properties
                </button>
              </h2> 
              <div id="additionalDiskProperties" class="collapse" aria-labelledby="additionalDiskProperties">
                <div class="row">
                  <label class="col-3 col-form-label text-right">Limits.Read:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskLimitsReadInput" class="form-control" placeholder="" name="diskLimitsReadInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit. Be sure to include the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Limits.Write:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskLimitsWriteInput" class="form-control" placeholder="" name="diskLimitsWriteInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit. Be sure to inlude the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Limits.Max:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskLimitsMaxInput" class="form-control" placeholder="" name="diskLimitsMaxInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit. Be sure to inlude the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Required:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="diskRequiredInput" onchange="" class="form-control" name="diskRequiredInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to fail if the source disk doesn't exist. Default: true"></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Read Only:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="diskReadOnlyInput" onchange="" class="form-control" name="diskReadOnlyInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to make the mount disk read-only or not. Default: false"></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Size:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskSizeInput" class="form-control" placeholder="" name="diskSizeInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the disk size in bytes. Be sure to include the suffix. This is only supported for the rootfs (/). Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Size.State:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskSizeStateInput" class="form-control" placeholder="" name="diskSizeStateInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the size of the filesystem volume used for saving runtime state in virtual machines. Be sure to inlude the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Recursive:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="diskRecursiveInput" onchange="" class="form-control" name="diskRecursiveInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether or not to recursively mount the source path. Default: false"></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Propagation:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="diskPropagationInput" onchange="" class="form-control" name="diskPropagationInput">
                        <option value="">(not set)</option>
                        <option value="private">private</option>
                        <option value="rprivate">rprivate</option>
                        <option value="rshared">rshared</option>
                        <option value="rslave">rslave</option>
                        <option value="runbindable">runbindable</option>
                        <option value="shared">shared</option>
                        <option value="slave">slave</option>
                        <option value="unbindable">unbindable</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Select how a bind-mount is shared between the instance and the host. Default: private'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Shift:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="diskShiftInput" onchange="" class="form-control" name="diskShiftInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select wheter to setup a shifting overlay to translate the source uid/gid to match the instance. Default: false"></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Raw Mount Options:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskRawMountOptionsInput" class="form-control" placeholder="" name="diskRawMountOptionsInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in filesystem specific mount options. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Ceph User Name:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskCephUserNameInput" class="form-control" placeholder="" name="diskCephUserNameInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Used if the source is ceph or cephfs. Enter a ceph user_name. Default: admin'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Ceph Cluster Name:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="diskCephClusterNameInput" class="form-control" placeholder="" name="diskCephClusterNameInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Used if the source is ceph or cephfs. Enter a ceph cluster_name. Default: ceph'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Boot Priority:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="diskBootPriorityInput" class="form-control" placeholder="" name="diskBootPriorityInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a boot priority number for VMs (highest numbers boot first). Default: (not set)'></i>
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="addInstanceDiskDevice()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Add Network Device Modal-->
  <div class="modal fade" id="addNetworkDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add Network Device</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Device Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="networkNameInput" class="form-control" placeholder="" name="networkNameInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter a unique name to identify this instance device.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Property Set:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="networkPropertySetInput" onchange="changePropertySetInput()" onchange="" class="form-control" name="networkPropertySetInput">
                    <option value="network">network</option>
                    <option value="nictype">nictype</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Select "network" to link to an existing LXD managed network or "nictype" to define your network.'></i>
              </div>
            </div>
            <div class="row" id="networkNicTypeRow" style="display: none;">
              <label class="col-3 col-form-label text-right">NIC Type:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="networkNicTypeInput" onchange="changeNicTypeInput()" onchange="" class="form-control" name="networkNicTypeInput">
                    <option value="bridged">bridged</option>
                    <option value="ipvlan">ipvlan</option>
                    <option value="macvlan">macvlan</option>
                    <option value="p2p">p2p</option>
                    <option value="physical">physical</option>
                    <option value="routed">routed</option>
                    <option value="sriov">sriov</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Select the network device type. Bridged devices use an existing bridge on the host. MacVlan devices setup a device based on an existing parent but using a different MAC address. P2P devices create a virtual device pair. Physical devices create a straight passthrough from the host interface. An sriov device passes a virtual function of an SR-IOV enabled network into the instance.'></i>
              </div>
            </div>
            <div class="row" id="networkParentTypeRow">
              <label class="col-3 col-form-label text-right">Parent Type:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="networkParentTypeInput" onchange="changeParentTypeInput()" class="form-control" name="networkParentTypeInput">
                    <option value="bridge">bridge</option>
                    <option value="macvlan">macvlan</option>
                    <option value="ovn">ovn</option>
                    <option value="sriov">sriov</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='Select the network type of the parent device.'></i>
              </div>
            </div>
            <div class="row" id="networkParentRow" style="display: none;">
              <label class="col-3 col-form-label text-right">Parent:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="networkParentInput" class="form-control" name="networkParentInput">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Select the parent network device from the host'></i>
              </div>
            </div>
            <div class="row" id="networkNetworkRow">
              <label class="col-3 col-form-label text-right">Network:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="networkNetworkInput" class="form-control" name="networkNetworkInput">
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Select the LXD network to link this device to.'></i>
              </div>
            </div>
            <div class="row" id="networkInterfaceNameRow">
              <label class="col-3 col-form-label text-right">Interface Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="networkInterfaceNameInput" class="form-control" placeholder="" name="networkInterfaceNameInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in a name for the interface inside the instance. Default: (kernel assigned)'></i>
              </div>
            </div>

            <hr>

            <div id="accordionNetworkProperties">
              <h2>
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#additionalNetworkProperties" aria-expanded="false" aria-controls="additionalNetworkProperties">
                  Additional Properties
                </button>
              </h2> 
              <div id="additionalNetworkProperties" class="collapse" aria-labelledby="additionalNetworkProperties">
                <div class="row" id="networkMtuRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">MTU:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkMtuInput" class="form-control" placeholder="" name="networkMtuInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='The MTU of the new interface. Default: (inherited from parent)'></i>
                  </div>
                </div>
                <div class="row" id="networkModeRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Mode:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkModeInput" onchange="" class="form-control" name="networkModeInput">
                        <option value="">(not set)</option>
                        <option value="l2">l2</option>
                        <option value="l3s">l3s</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Select the IPVLAN mode. Default: (l3s)'></i>
                  </div>
                </div>
                <div class="row" id="networkHwaddrRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">HWADDR:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkHwaddrInput" class="form-control" placeholder="" name="networkHwaddrInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a MAC address for the interface. Default: (randomly assigned)'></i>
                  </div>
                </div>
                <div class="row" id="networkHostNameRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Host Name:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkHostNameInput" class="form-control" placeholder="" name="networkHostNameInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the name of the interface inside the host. Default: (randomly assigned)'></i>
                  </div>
                </div>
                <div class="row" id="networkLimitsIngressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Limits.Ingress:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkLimitsIngressInput" class="form-control" placeholder="" name="networkLimitsIngressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit for incoming traffic. Be sure to include the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkLimitsEgressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Limits.Egress:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkLimitsEgressInput" class="form-control" placeholder="" name="networkLimitsEgressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit for outgoing traffic. Be sure to include the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkLimitsMaxRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Limits.Max:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkLimitsMaxInput" class="form-control" placeholder="" name="networkLimitsMaxInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the I/O limit. Be sure to inluce the suffix. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4AddressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Address:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv4AddressInput" class="form-control" placeholder="" name="networkIpv4AddressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in an IPv4 address to assign to the instance through DHCP. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4GatewayRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Gateway:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv4GatewayInput" class="form-control" placeholder="" name="networkIpv4GatewayInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='If using l3s mode, enter either "auto" or "none for using an automatic default gateway. If using l2 mode, enter in the address of the gateway. Default: (auto)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4HostTableRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Host Table:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkIpv4HostTableInput" class="form-control" placeholder="" name="networkIpv4HostTableInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a custom policy routing table ID to add IPv4 static routes to. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4HostAddressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Host Address:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkIpv4HostAddressInput" class="form-control" placeholder="" name="networkIpv4HostAddressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the IPv4 address to add to the host-side veth interface. Default: (169.254.0.1)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4RoutesRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Routes:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv4RoutesInput" class="form-control" placeholder="" name="networkIpv4RoutesInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a comma seperated list of IPv4 static routes. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv4RoutesExternalRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv4 Routes External:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv4RoutesExternalInput" class="form-control" placeholder="" name="networkIpv4RoutesExternalInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a comma seperated list of static routes to route to the NIC and publish on the uplink. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6AddressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Address:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv6AddressInput" class="form-control" placeholder="" name="networkIpv6AddressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in an IPv6 address to assign to the instance through DHCP. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6GatewayRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Gateway:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv6GatewayInput" class="form-control" placeholder="" name="networkIpv6GatewayInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='If using l3s mode, enter either "auto" or "none for using an automatic default gateway. If using l2 mode, enter in the address of the gateway. Default: (auto or not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6HostTableRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Host Table:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkIpv6HostTableInput" class="form-control" placeholder="" name="networkIpv6HostTableInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a custom policy routing table ID to add IPv4 static routes to. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6HostAddressRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Host Address:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkIpv6HostAddressInput" class="form-control" placeholder="" name="networkIpv6HostAddressInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the IPv6 address to add to the host-side veth interface. Default: (fe80::1)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6RoutesRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Routes:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv6RoutesInput" class="form-control" placeholder="" name="networkIpv6RoutesInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a comma seperated list of IPv4 static routes. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkIpv6RoutesExternalRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">IPv6 Routes External:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkIpv6RoutesExternalInput" class="form-control" placeholder="" name="networkIpv6RoutesExternalInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a comma seperated list of static routes to route to the NIC and publish on the uplink. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityMacFilteringRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security.MAC.Filtering:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityMacFilteringInput" onchange="" class="form-control" name="networkSecurityMacFilteringInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select wheter to prevent the instance from spoofing another's MAC address. Default: false"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityIpv4FilteringRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security.IPv4.Filtering:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityIpv4FilteringInput" onchange="" class="form-control" name="networkSecurityIpv4FilteringInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select wheter to prevent the instance from spoofing another's IPv4 address (enables mac_filtering). Default: false"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityIpv6FilteringRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security.IPv6.Filtering:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityIpv6FilteringInput" onchange="" class="form-control" name="networkSecurityIpv6FilteringInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select wheter to prevent the instance from spoofing another's IPv6 address (enables mac_filtering). Default: false"></i>
                  </div>
                </div>
                <div class="row" id="networkMaasSubnetIpv4Row" style="display: none;">
                  <label class="col-3 col-form-label text-right">MAAS Subnet IPv4:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkMaasSubnetIpv4Input" class="form-control" placeholder="" name="networkMaasSubnetIpv4Input">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Enter in the MAAS IPv4 subnet to register the instance in. Default: (not set)"></i>
                  </div>
                </div>
                <div class="row" id="networkMaasSubnetIpv6Row" style="display: none;">
                  <label class="col-3 col-form-label text-right">MAAS Subnet IPv6:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkMaasSubnetIpv6Input" class="form-control" placeholder="" name="networkMaasSubnetIpv6Input">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Enter in the MAAS IPv6 subnet to register the instance in. Default: (not set)"></i>
                  </div>
                </div>
                <div class="row" id="networkBootPriorityRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Boot Priority:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkBootPriorityInput" class="form-control" placeholder="" name="networkBootPriorityInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Enter in a boot priority number for VMs (highest number boots first). Default: (not set)"></i>
                  </div>
                </div>
                <div class="row" id="networkVlanRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">VLAN:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="networkVlanInput" class="form-control" placeholder="" name="networkVlanInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in a VLAN ID to use for untagged traffic. Enter "none" to remove the port from the default VLAN. Default: (not set)'></i>
                  </div>
                </div>
                <div class="row" id="networkVlanTaggedRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">VLAN Tagged:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkVlanTaggedInput" class="form-control" placeholder="" name="networkVlanTaggedInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Enter in a comma seperated list of VLAN IDs to join. Default: (not set)"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityPortIsolationRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security Port Isolation:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityPortIsolationInput" onchange="" class="form-control" name="networkSecurityPortIsolationInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to prevent the NIC from communicating with other port isolated NICs in the network. Default: false"></i>
                  </div>
                </div>
                <div class="row" id="networkGvrpRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">GVRP:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkGvrpInput" onchange="" class="form-control" name="networkGvrpInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to register the VLAN using the GARP VLAN Registration Protocol. Default: false"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityAclsRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security ACLs:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="text" id="networkSecurityAclsInput" class="form-control" placeholder="" name="networkSecurityAclsInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Enter in a comma separated list of Network ACLs. Default: (not set)"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityAclsDefaultIngressActionRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security ACLs Default Ingress Action:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityAclsDefaultIngressActionInput" onchange="" class="form-control" name="networkSecurityAclsDefaultIngressActionInput">
                        <option value="">(not set)</option>
                        <option value="allow">allow</option>
                        <option value="reject">reject</option>
                        <option value="drop">drop</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select an action to use for ingress traffic without any matching ACL rules. Default: (reject)"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityAclsDefaultEgressActionRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security ACLs Default Egress Action:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityAclsDefaultEgressActionInput" onchange="" class="form-control" name="networkSecurityAclsDefaultEgressActionInput">
                        <option value="">(not set)</option>
                        <option value="allow">allow</option>
                        <option value="reject">reject</option>
                        <option value="drop">drop</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select an action to use for egress traffic without any matching ACL rules. Default: (reject)"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityAclsDefaultIngressLoggedRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security ACLs Default Ingress Logged:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityAclsDefaultIngressLoggedInput" onchange="" class="form-control" name="networkSecurityAclsDefaultIngressLoggedInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to log ingress traffic without any matching ACL rules. Default: (false)"></i>
                  </div>
                </div>
                <div class="row" id="networkSecurityAclsDefaultEgressLoggedRow" style="display: none;">
                  <label class="col-3 col-form-label text-right">Security ACLs Default Egress Logged:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="networkSecurityAclsDefaultEgressLoggedInput" onchange="" class="form-control" name="networkSecurityAclsDefaultEgressLoggedInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title="Select whether to log egress traffic without any matching ACL rules. Default: (false)"></i>
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="addInstanceNetworkDevice()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Add Proxy Device Modal-->
  <div class="modal fade" id="addProxyDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add Proxy Device</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Device Name:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="proxyDeviceNameInput" class="form-control" placeholder="" name="proxyDeviceNameInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter a unique name to identify this instance device'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Listen:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="proxyListenInput" class="form-control" placeholder="" name="proxyListenInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter in the connection type, address, and port to bind and listen to, using the format <type>:<addr>:<port>[-<port>][,<port>]. For example, tcp:0.0.0.0:8080'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Connect:</label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="proxyConnectInput" class="form-control" placeholder="" name="proxyConnectInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle text-danger" title='(Required) - Enter in the connection type, address, and port to connect to, using the format <type>:<addr>:<port>[-<port>][,<port>]. For example, tcp:127.0.0.1:8080'></i>
              </div>
            </div>

            <hr>

            <div id="accordionProxyProperties">
              <h2>
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#additionalProxyProperties" aria-expanded="false" aria-controls="additionalProxyProperties">
                  Additional Properties
                </button>
              </h2> 
              <div id="additionalProxyProperties" class="collapse" aria-labelledby="additionalProxyProperties">
                <div class="row">
                  <label class="col-3 col-form-label text-right">Bind:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="proxyBindInput" onchange="" class="form-control" name="proxyBindInput">
                        <option value="">(not set)</option>
                        <option value="host">host</option>
                        <option value="instance">instance</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Select which side to bind on. Default: host'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">UID:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="proxyUidInput" class="form-control" placeholder="" name="proxyUidInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the UID number of the owner to the listening Unix socket. Default: 0'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">GID:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="proxyGidInput" class="form-control" placeholder="" name="proxyGidInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the GID number of the owner ot the listening Unix socket. Default: 0'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Mode:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="proxyModeInput" class="form-control" placeholder="" name="proxyModeInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the permissions mode for the listening Unix socket. Default: 0644'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">NAT:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="proxyNatInput" onchange="" class="form-control" name="proxyNatInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Select whether or not to optimize proxying via NAT. Default: false'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Proxy Protocol:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <select id="proxyProxyProtocolInput" onchange="" class="form-control" name="proxyProxyProtocolInput">
                        <option value="">(not set)</option>
                        <option value="true">true</option>
                        <option value="false">false</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Select whether to use the HAProxy PROXY protocol to when sending information. Default: false'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Security UID:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="proxySecurityUidInput" class="form-control" placeholder="" name="proxySecurityUidInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the UID for security privileges. Default: 0'></i>
                  </div>
                </div>
                <div class="row">
                  <label class="col-3 col-form-label text-right">Security GID:</label>
                  <div class="col-7">
                    <div class="form-group">
                      <input type="number" id="proxySecurityGidInput" class="form-control" placeholder="" name="proxySecurityGidInput">
                    </div>
                  </div>
                  <div class="col-1">
                    <i class="far fa-sm fa-question-circle" title='Enter in the GID for security privileges. Default: 0'></i>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="addInstanceProxyDevice()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Publish Instance Modal-->
  <div class="modal fade" id="publishInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Publish Image from Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-3 col-form-label text-right">Description: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishInstanceDescriptionInput" class="form-control" placeholder="" name="description">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in a description for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">OS: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishInstanceOsInput" class="form-control" placeholder="" name="os">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in the operating system name for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Release: </label>
              <div class="col-7">
                <div class="form-group">
                  <input type="text" id="publishInstanceReleaseInput" class="form-control" placeholder="" name="release">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Enter in the release version for the new image.'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-3 col-form-label text-right">Public:</label>
              <div class="col-7">
                <div class="form-group">
                  <select id="publishInstancePublicInput" class="form-control" name="public">
                    <option value="false" selected>false</option>
                    <option value="true">true</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Select whether or not this image is public. Default: false'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="publishInstance()" data-dismiss="modal">Submit</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Load Log Modal-->
  <div class="modal fade" id="loadLogModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Log Contents</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-12 col-form-label" id="logNameInput"></label>
              <div class="col-12">
                <div class="form-group text-right">
                  <pre>
                    <textarea name="log_data" class="form-control" id="logDataInput" rows="16" ></textarea>
                  </pre>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Instance Modal-->
  <div class="modal fade" id="editInstanceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Instance</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-12 col-form-label" id="instanceNameEditInput"></label>
              <div class="col-12">
                <div class="form-group text-right">
                  <pre>
                    <textarea name="json" class="form-control" id="jsonEditInput" rows="16" ></textarea>
                  </pre>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateInstanceJson()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Boot Configuration Modal-->
  <div class="modal fade" id="editBootConfigurationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Boot Configuration</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-4 col-form-label text-right">Autostart:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="bootAutostartInput" class="form-control" name="bootAutostartInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Always start the instance when LXD starts (if not set, restore last state). Default: (not set)'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Autostart Delay:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" id="bootAutostartDelayInput" class="form-control" placeholder="" name="bootAutostartDelayInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Number of seconds to wait after the instance started before starting the next one. Default: 0'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Autostart Priority:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" id="bootAutostartPriorityInput" class="form-control" placeholder="" name="bootAutostartPriorityInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='What order to start the instances in (starting with highest). Default: 0'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Host Shutdown Timeout:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" id="bootHostShutdownTimeoutInput" class="form-control" placeholder="" name="bootHostShutdownTimeoutInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Seconds to wait for instance to shutdown before it is force stopped. Default: 30'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Stop Priority:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" id="bootStopPriorityInput" class="form-control" placeholder="" name="bootStopPriorityInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='What order to shutdown the instances (starting with highest). Default: 0'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateBootConfiguration()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit CPU Limits Modal-->
  <div class="modal fade" id="editCpuLimitsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit CPU Limits</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-4 col-form-label text-right">CPU: </label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="limitsCpuInput" class="form-control" placeholder="" name="limitsCpuInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Number or range of CPUs to expose to the instance. Default: (all)'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">CPU Allowance: </label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="limitsCpuAllowanceInput" class="form-control" placeholder="" name="limitsCpuAllowanceInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='How much of the CPU can be used. Can be a percentage (e.g. 50%) for a soft limit or hard a chunk of time (25ms/100ms). Default: 100%'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">CPU Priority:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" id="limitsCpuPriorityInput" class="form-control" placeholder="" name="limitsCpuPriorityInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='CPU scheduling priority compared to other instances sharing the same CPUs (overcommit) (integer between 0 and 10). Default: 10'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateCpuLimits()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Memory Limits Modal-->
  <div class="modal fade" id="editMemoryLimitsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Memory Limits</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-4 col-form-label text-right">Memory: </label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="limitsMemoryInput" class="form-control" placeholder="" name="limitsMemoryInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title="Percentage of the host's memory or fixed value in bytes (various suffixes supported, see below). Default: (all)"></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Memory Enforce: </label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="limitsMemoryEnforceInput" class="form-control" name="limitsMemoryEnforceInput">
                    <option value="">(not set)</option>
                    <option value="hard">hard</option>
                    <option value="soft">soft</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title="If hard, instance can't exceed its memory limit. If soft, the instance can exceed its memory limit when extra host memory is available. Default: hard"></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Memory Hugepages:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="limitsMemoryHugepagesInput" class="form-control" name="limitsMemoryHugepagesInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Controls whether to back the instance using hugepages rather than regular system memory. Default: false'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Memory Swap:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="limitsMemorySwapInput" class="form-control" name="limitsMemorySwapInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Controls whether to encourage/discourage swapping less used pages for this instance. Default: true'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Memory Swap Priority:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="number" min="0" step="1" max="10" id="limitsMemorySwapPriorityInput" class="form-control" placeholder="" name="limitsMemorySwapPriorityInput">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='The higher this is set, the least likely the instance is to be swapped to disk (integer between 0 and 10). Default: 10'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateMemoryLimits()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Security Configuration Modal-->
  <div class="modal fade" id="editSecurityConfigurationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Security Configuration</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">

            <div class="row">
              <label class="col-4 col-form-label text-right">Nesting:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="securityNestingInput" class="form-control" name="securityNestingInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Support running lxd (nested) inside the instance. Default: false'></i>
              </div>
            </div>

            <div class="row">
              <label class="col-4 col-form-label text-right">Privileged:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="securityPrivilegedInput" class="form-control" name="securityPrivilegedInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Runs the instance in privileged mode. Default: false'></i>
              </div>
            </div>

            <div class="row">
              <label class="col-4 col-form-label text-right">Protection Delete:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="securityProtectionDeleteInput" class="form-control" name="securityProtectionDeleteInput">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Prevents the instance from being deleted. Default: false'></i>
              </div>
            </div>

          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateSecurityConfiguration()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Snapshot Configuration Modal-->
  <div class="modal fade" id="editSnapshotConfigurationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Snapshot Configuration</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-4 col-form-label text-right">Schedule: </label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="snapshotsScheduleInput" class="form-control" placeholder="" name="snapshot">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Cron expression (<minute> <hour> <dom> <month> <dow>). Default: (not set)'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Schedule Stopped:</label>
              <div class="col-6 text-right">
                <div class="form-group">
                  <select id="snapshotsScheduleStoppedInput" class="form-control" name="snapshotStateful">
                    <option value="">(not set)</option>
                    <option value="true">true</option>
                    <option value="false">false</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Controls whether or not stopped instances are to be snapshoted automatically. Default: false'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Pattern:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="snapshotsPatternInput" class="form-control" placeholder="" name="snapshot">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Pongo2 template string which represents the snapshot name (used for scheduled snapshots and unnamed snapshots). Default: snap%d'></i>
              </div>
            </div>
            <div class="row">
              <label class="col-4 col-form-label text-right">Expiry:</label>
              <div class="col-6">
                <div class="form-group">
                  <input type="text" id="snapshotsExpiryInput" class="form-control" placeholder="" name="snapshot">
                </div>
              </div>
              <div class="col-1">
                <i class="far fa-sm fa-question-circle" title='Controls when snapshots are to be deleted (expects expression like 1M 2H 3d 4w 5m 6y). Default: (not set)'></i>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="#" onclick="updateSnapshotConfiguration()" data-dismiss="modal">Save</a>
          </div>
      </div>
    </div>
  </div>

  <!-- About Modal-->
  <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">About</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-12">
              <div id="about"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Dismiss</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Web Socket Connection Error Modal-->
  <div class="modal fade" id="webSocketConnectionErrorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">WebSocket Connection Error</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-12">
              <div id="webSocketConnectionError"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Dismiss</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="vendor/sb-admin-2/js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="vendor/datatables/jquery.dataTables.min.js"></script>
  <script src="vendor/datatables/dataTables.bootstrap4.min.js"></script>
  <script src="vendor/xterm/lib/xterm.js"></script>

</body>

<script>
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const remoteId = urlParams.get('remote');
  const instanceName = urlParams.get('instance');
  const projectName = urlParams.get('project');
  var instanceDetails = "";
  var instanceStateDetails = "";
  var consoleControlSocket;
  var consoleDataSocket;
  var consoleTerminal;

  var execControlSocket;
  var execDataSocket;

  var execSocket;
  var execTerminal;
  var activeTab = "#v-pills-general";

  function logout(){
    $.get("./php/aaa/authentication.php?action=deauthenticateUser", function (data) {
      operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.status_code == 200) {
        window.location = './index.html'
      }
    });
  }

  function displayMenuOptions(data){
    jsonData = JSON.parse(data);
    switch (jsonData.metadata.status){
      case "Stopped":
        $('#startLink').show();
        $('#stopLink').hide();
        $('#restartInstanceOption').hide();
        $('#stopInstanceForcefullyOption').hide();
        $('#freezeInstanceOption').hide();
        $('#unfreezeLink').hide();
        $('#snapshotInstanceOption').show();
        $('#attachInstanceProfileOption').show();
        $('#editInstanceOption').show();
        $('#renameInstanceOption').show();
        $('#copyInstanceOption').show();
        $('#migrateInstanceOption').show();
        $('#publishInstanceOption').show();
        $('#deleteInstanceOption').show();
        break;
      case "Frozen":
        $('#startLink').hide();
        $('#stopLink').hide();
        $('#restartInstanceOption').hide();
        $('#stopInstanceForcefullyOption').hide();
        $('#freezeInstanceOption').hide();
        $('#unfreezeLink').show();
        $('#snapshotInstanceOption').show();
        $('#attachInstanceProfileOption').hide();
        $('#editInstanceOption').hide();
        $('#renameInstanceOption').hide();
        $('#copyInstanceOption').show();
        $('#migrateInstanceOption').hide();
        $('#publishInstanceOption').hide();
        $('#deleteInstanceOption').hide();
        break;
      default:
        $('#startLink').hide();
        $('#stopLink').show();
        $('#restartInstanceOption').show();
        $('#stopInstanceForcefullyOption').show();
        $('#freezeInstanceOption').show();
        $('#unfreezeLink').hide();
        $('#snapshotInstanceOption').show();
        $('#attachInstanceProfileOption').show();
        $('#editInstanceOption').show();
        $('#renameInstanceOption').hide();
        $('#copyInstanceOption').hide();
        $('#migrateInstanceOption').hide();
        $('#publishInstanceOption').hide();
        $('#deleteInstanceOption').hide();
    }
  }

  function operationStatusCheck(){
    //check to see if there are any running operations
    $.get("./php/lxd/operations.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayOperationStatus", function (data) {
      //Check to see if we have running operations
      if (data){
        //Display spinner and notification area if there are running tasks
        $('#spinner').show();
        $('#notificationArea').show();
        $('#notification').text(data);
        //Set the page to check operations again in 1 second
        setTimeout(() => { operationStatusCheck(); }, 1000);
      }
      else {
        //Hide spinner and notification area if no running tasks
        $('#spinner').hide();
        $('#notificationArea').hide();
        $('#notification').text("");
        //Set the page to check operations again in 3 seconds
        setTimeout(() => { operationStatusCheck(); }, 3000);
      }
    });
  }
  
  function reloadPageContent(){

    //Check Authorization
    $.get("./php/aaa/authentication.php?action=validateAuthentication", function (data) {
      operationData = JSON.parse(data);
      if (operationData.status_code != 200) {
        console.log(operationData);
        window.location = './index.html'
      }
    });

    //Reload based on which tab is active
    switch(activeTab) {
      case "#v-pills-general":
        $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
          if (instanceDetails != data){  
            data = JSON.parse(data);

            $("#name").text(data.name)
            $("#description").text(data.description)
            $("#type").text(data.type)
            $("#status").text(data.status)
            $("#image").text(data.image)
            $("#location").text(data.location)
            $("#created").text(data.created)

            $("#bootAutostart").text(data.bootAutostart)
            $("#bootAutostartDelay").text(data.bootAutostartDelay)
            $("#bootAutostartPriority").text(data.bootAutostartPriority)
            $("#bootHostShutdownTimeout").text(data.bootHostShutdownTimeout)
            $("#bootStopPriority").text(data.bootStopPriority)

            $("#limitsMemory").text(data.limitsMemory)
            $("#limitsMemoryEnforce").text(data.limitsMemoryEnforce)
            $("#limitsMemoryHugepages").text(data.limitsMemoryHugepages)
            $("#limitsMemorySwap").text(data.limitsMemorySwap)
            $("#limitsMemorySwapPriority").text(data.limitsMemorySwapPriority)

            $("#securityNesting").text(data.securityNesting)
            $("#securityPrivileged").text(data.securityPrivileged)
            $("#securityProtectionDelete").text(data.securityProtectionDelete)

            $("#limitsCpu").text(data.limitsCpu)
            $("#limitsCpuAllowance").text(data.limitsCpuAllowance)
            $("#limitsCpuPriority").text(data.limitsCpuPriority)

            $("#snapshotsSchedule").text(data.snapshotsSchedule)
            $("#snapshotsScheduleStopped").text(data.snapshotsScheduleStopped)
            $("#snapshotsPattern").text(data.snapshotsPattern)
            $("#snapshotsExpiry").text(data.snapshotsExpiry)
          }
        });
        
        $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceStateInfo", function (data) {
          data = JSON.parse(data);
          $("#memory").text(data.memory)
          $("#swap").text(data.swap)
          $("#pid").text(data.pid)
          $("#processes").text(data.processes)
          $("#ipv4Addresses").text(data.ipv4Addresses)
          $("#ipv6Addresses").text(data.ipv6Addresses)
        });
        break;

      case "#v-pills-snapshots":
        $('#snapshotTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-profiles":
        $('#profileTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-interfaces":
        $('#interfaceTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-network-devices":
        $('#networkDeviceTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-disk-devices":
        $('#diskDeviceTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-proxy-devices":
        $('#proxyDeviceTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-backups":
        $('#backupTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-logs":
        $('#logTableList').DataTable().ajax.reload(null, false);
        break;

      case "#v-pills-console":
        // code block
        break;

      case "#v-pills-exec":
        // code block
        break;

      default:
        // code block
    } 

    //Display instance menu options based on state
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=retrieveInstanceState", displayMenuOptions)

  }

  function loadPageContent(){

    //Display current logged in username
    $("#username").load("./php/admin/settings.php?action=displayUsername");

    //Display instance menu options based on state
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=retrieveInstanceState", displayMenuOptions)
    
    //Load Instance Information Cards
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);
        console.log(data);
        $("#name").text(data.name)
        $("#description").text(data.description)
        $("#type").text(data.type)
        $("#status").text(data.status)
        $("#image").text(data.image)
        $("#location").text(data.location)
        $("#created").text(data.created)

        $("#bootAutostart").text(data.bootAutostart)
        $("#bootAutostartDelay").text(data.bootAutostartDelay)
        $("#bootAutostartPriority").text(data.bootAutostartPriority)
        $("#bootHostShutdownTimeout").text(data.bootHostShutdownTimeout)
        $("#bootStopPriority").text(data.bootStopPriority)

        $("#limitsMemory").text(data.limitsMemory)
        $("#limitsMemoryEnforce").text(data.limitsMemoryEnforce)
        $("#limitsMemoryHugepages").text(data.limitsMemoryHugepages)
        $("#limitsMemorySwap").text(data.limitsMemorySwap)
        $("#limitsMemorySwapPriority").text(data.limitsMemorySwapPriority)

        $("#securityNesting").text(data.securityNesting)
        $("#securityPrivileged").text(data.securityPrivileged)
        $("#securityProtectionDelete").text(data.securityProtectionDelete)

        $("#limitsCpu").text(data.limitsCpu)
        $("#limitsCpuAllowance").text(data.limitsCpuAllowance)
        $("#limitsCpuPriority").text(data.limitsCpuPriority)

        $("#snapshotsSchedule").text(data.snapshotsSchedule)
        $("#snapshotsScheduleStopped").text(data.snapshotsScheduleStopped)
        $("#snapshotsPattern").text(data.snapshotsPattern)
        $("#snapshotsExpiry").text(data.snapshotsExpiry)
    });
    
    //Load Instance State Information for Card
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceStateInfo", function (data) {
        data = JSON.parse(data);
        $("#memory").text(data.memory)
        $("#swap").text(data.swap)
        $("#pid").text(data.pid)
        $("#processes").text(data.processes)
        $("#ipv4Addresses").text(data.ipv4Addresses)
        $("#ipv6Addresses").text(data.ipv6Addresses)
    });

    //Load Snapshots Table
    $('#snapshotTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceSnapshots",
      columns: [
        {},
        { title: "Name" },
        { title: "Stateful/Stateless" },
        { title: "Size" },
        { title: "Created" },
        { title: "Expires" },
        { title: "Actions" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Profiles Table
    $('#profileTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceProfiles",
      columns: [
        {},
        { title: "Name" },
        { title: "Description" },
        { title: "Actions" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Interfaces Table
    $('#interfaceTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceInterfaces",
      columns: [
        {},
        { title: "Name" },
        { title: "HW Address" },
        { title: "IPv4" },
        { title: "IPv6" },
        { title: "State" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Network Devices Table
    $('#networkDeviceTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceNetworkDevices",
      columns: [
        {},
        { title: "Name" },
        { title: "Type" },
        { title: "Parent" },
        { title: "Network" },
        { title: "Interface Name" },
        { title: "Action" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Disk Devices Table
    $('#diskDeviceTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceDiskDevices",
      columns: [
        {},
        { title: "Name" },
        { title: "Path" },
        { title: "Usage" },
        { title: "Type" },
        { title: "Action" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Proxy Devices Table
    $('#proxyDeviceTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceProxyDevices",
      columns: [
        {},
        { title: "Name" },
        { title: "Connect" },
        { title: "Listen" },
        { title: "Type" },
        { title: "Action" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });
    
    //Load Backups Table
    $('#backupTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceBackups",
      columns: [
        {},
        { title: "Name" },
        { title: "Created" },
        { title: "Expires" },
        { title: "Instance Only" },
        { title: "Optimized Storage" },
        { title: "Actions" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Load Logs Table
    $('#logTableList').DataTable( {
      ajax: "./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listInstanceLogs",
      columns: [
        {},
        { title: "Name" },
        { title: "Actions" }
      ],
      order: [],
      columnDefs: [
        { targets: 0, orderable: false, width: "25px" }
      ]
    });

    //Check for any running operations
    operationStatusCheck();

    //Set the page content to reload in 5 seconds
    setInterval(() => { reloadPageContent(); }, 5000);
  }

  function startInstance(){
    console.log("Info: starting instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=startInstance",  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function stopInstance(){
    console.log("Info: stopping instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=stopInstance",  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function stopInstanceForcefully(){
    console.log("Info: forcefully stopping instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=stopInstanceForcefully",  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function restartInstance(){
    console.log("Info: restarting instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=restartInstance",  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function freezeInstance(){
    console.log("Info: freezing instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=freezeInstance",  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function unfreezeInstance(){
    console.log("Info: unfreezing instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=unfreezeInstance",  function (data) {
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.status_code == 100 && operationData.metadata.status_code < 400){
        operationStatusCheck();
      }
      if (operationData.metadata.status_code >= 400){
        alert(operationData.metadata.err);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function snapshotInstance(){
    var snapshotName = $("#snapshotName").val();
    var snapshotStateful = $("#snapshotStateful").val();
    console.log("Info: creating snapshot " + snapshotName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(snapshotName) + "&stateful=" + encodeURI(snapshotStateful) + "&action=snapshotInstance", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function renameInstance(){
    var newInstanceName = $("#newInstanceName").val();
    console.log("Info: renaming instance " + instanceName + " to " + newInstanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(newInstanceName) + "&action=renameInstance", function (data) {
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.status_code == 100 && operationData.metadata.status_code < 400){
        operationStatusCheck();
        redirectURL = "instance.html?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(newInstanceName);
        window.location.replace(redirectURL);
      }
      if (operationData.metadata.status_code >= 400){
        alert(operationData.metadata.err);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function copyInstance(){
    var copyName = $("#copyName").val();
    console.log("Info: copying instance " + instanceName + " to " + copyName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(copyName) + "&action=copyInstance", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
    });
  }

  function loadCreateInstanceFromSnapshotModal(snap){
      $("#snapNameForSnapshotCreate").val(snap);
      $("#createInstanceFromSnapshotModal").modal('show');
  }

  function loadPublishImageFromSnapshotModal(snap){
      $("#publishSnapshotHiddenName").val(snap);
      $("#publishImageFromSnapshotModal").modal('show');
  }

  function createInstanceFromSnapshot(){
    var copyName = $("#instanceNameForSnapshotCreate").val();
    var snapName = $("#snapNameForSnapshotCreate").val();
    console.log("Info: creating instance " + copyName + " from snapshot " + instanceName + "/" + snapName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&snapshot=" + encodeURI(snapName) + "&name=" + encodeURI(copyName) + "&action=createInstanceFromSnapshot", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
    });
  }

  function publishImageFromSnapshot(){
    var description = $("#publishSnapshotDescriptionInput").val();
    var publicDownload = $("#publishSnapshotPublicInput").val();
    var os = $("#publishSnapshotOsInput").val();
    var release = $("#publishSnapshotReleaseInput").val();
    var snapName = $("#publishSnapshotHiddenName").val();
    var instanceSnapshotName = instanceName + "/" + snapName;
    console.log("Info: publishing image " + description + " from snapshot " + instanceSnapshotName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceSnapshotName) + "&description=" + encodeURI(description) + "&public=" + encodeURI(publicDownload) + "&os=" + encodeURI(os) + "&release=" + encodeURI(release) + "&action=publishInstanceSnapshot", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
    });
  }

  function migrateInstance(){
    var clusterInput = $("#selectClusterInput").val();
    console.log("Info: migrating instance " + instanceName + " to " + clusterInput);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&location=" + encodeURI(clusterInput) + "&action=migrateInstance", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function deleteInstance(){
    console.log("Info: deleting instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=deleteInstance", function (data) {
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.status_code == 100 && operationData.metadata.status_code < 400){
        operationStatusCheck();
        redirectURL = "instances.html?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName)
        window.location.replace(redirectURL);
      }
      if (operationData.error_code == 404){
        redirectURL = "instances.html?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName)
        window.location.replace(redirectURL);
      }
      if (operationData.metadata.status_code >= 400){
        alert(operationData.metadata.err)
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function attachInstanceProfile(){
    var profileName = $("#selectProfileInput").val();
    console.log("Info: attaching profile " + profileName + " to instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(profileName) + "&action=attachInstanceProfile", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function detachInstanceProfile(profileName){
    console.log("Info: detaching profile " + profileName + " from instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(profileName) + "&action=detachInstanceProfile", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function restoreInstanceSnapshot(snapshotName){
    console.log("Info: restoring snapshot " + snapshotName + " to instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(snapshotName) + "&action=restoreInstanceSnapshot", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function deleteInstanceSnapshot(snapshotName){
    console.log("Info: deleting snapshot " + snapshotName + " from instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(snapshotName) + "&action=deleteInstanceSnapshot", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }
  
  function publishInstance(){
    var description = $("#publishInstanceDescriptionInput").val();
    var publicDownload = $("#publishInstancePublicInput").val();
    var os = $("#publishInstanceOsInput").val();
    var release = $("#publishInstanceReleaseInput").val();
    console.log("Info: publishing image " + description + " from instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&description=" + encodeURI(description) + "&public=" + encodeURI(publicDownload) + "&os=" + encodeURI(os) + "&release=" + encodeURI(release) + "&action=publishInstance", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function loadInstanceLog(logPath){
    console.log("Info: loading log " + logPath);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&path=" + encodeURI(logPath) + "&action=loadInstanceLog", function (data) {
      $("#logNameInput").text(logPath);
      $("#logDataInput").val(data);
      $("#loadLogModal").modal('show');
    });
  }

  function deleteInstanceLog(logPath){
    console.log("Info: deleting log " + logPath);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&path=" + encodeURI(logPath) + "&action=deleteInstanceLog", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function initializeCreateBackup(){

    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1;
    
    var day = now.getDate();
    var hour = now.getHours();
    var min = now.getMinutes();
    var sec = now.getSeconds();

    if (month < 10) 
      month = '0' + month;
    if (day < 10) 
      day = '0' + day;
    if (hour < 10) 
      hour = '0' + hour;
    if (min < 10) 
      min = '0' + min;
    if (sec < 10) 
      sec = '0' + sec;

    var backupName = instanceName + "-" + year + month + day + hour + min + sec;
    $("#backupName").val(backupName);
    $("#backupInstanceModal").modal('show');
  }

  function createBackup(){
    var backupName = $("#backupName").val();
    var backupInstanceOnly = $("#backupInstanceOnly").val();
    var backupOptimizedStorage = $("#backupOptimizedStorage").val();
    var backupCompressionAlgorithm = $("#backupCompressionAlgorithm").val();
    console.log("Info: backing up instance " + instanceName + " to " + backupName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(backupName) + "&instance_only=" + encodeURI(backupInstanceOnly) + "&optimized_storage=" + encodeURI(backupOptimizedStorage) + "&compression_algorithm=" + encodeURI(backupCompressionAlgorithm) + "&action=createInstanceBackup", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function exportInstanceBackup(backupName){
    console.log("Info: exporting backup " + backupName + " from instance " + instanceName + " to a file");
    $('#spinner').show();
    $('#notificationArea').show();
    $('#notification').text('Exporting ' + backupName + ' to local file');
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(backupName) + "&action=exportInstanceBackup", function (data) {
      $('#spinner').hide();
      $('#notificationArea').hide();
      $('#notification').text("");
    });
  }

  function deleteInstanceBackup(backupName){
    console.log("Info: deleting backup " + backupName + " from instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(backupName) + "&action=deleteInstanceBackup", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function loadAddDiskDeviceModal(){
    console.log("Info: loading disk device modal");
    $("#diskPoolInput").load("./php/lxd/storage-pools.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listStoragePoolsForSelectOption");
    $("#addDiskDeviceModal").modal('show');
  }

  function loadAddNetworkDeviceModal(){
    console.log("Info: loading network device modal");
    $("#networkParentInput").load("./php/lxd/networks.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listNetworksForSelectOption");
    changeParentTypeInput();
    $("#addNetworkDeviceModal").modal('show');
  }

  function changeStorageVolumeInput(){
    var diskPoolInput = $("#diskPoolInput").val();
    if (diskPoolInput == ""){
      $("#diskSourceInput").show()
      $("#diskSourceSelectInput").hide()
    }
    else{
      //show and populate select field
      $("#diskSourceSelectInput").load("./php/lxd/storage-volumes.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&pool=" + encodeURI(diskPoolInput) + "&action=listStorageVolumesForSelectOption");
      $("#diskSourceInput").hide()
      $("#diskSourceSelectInput").show()
    }
    
  }

  function changePropertySetInput(){
    var networkPropertySetInput = $("#networkPropertySetInput").val()
    if (networkPropertySetInput == "network"){
      $("#networkNetworkRow").show();
      $("#networkParentTypeRow").show();
      $("#networkNicTypeRow").hide();
      $("#networkParentTypeInput").val('bridge');
      changeParentTypeInput();
    }
    if (networkPropertySetInput == "nictype"){
      $("#networkNetworkRow").hide();
      $("#networkParentTypeRow").hide();
      $("#networkNicTypeRow").show();
      changeNicTypeInput();
    }
  }

  function changeParentTypeInput(){
    var networkParentTypeInput = $("#networkParentTypeInput").val();
    $("#networkNetworkInput").load("./php/lxd/networks.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&type=" + encodeURI(networkParentTypeInput) + "&managed_only=true" + "&action=listNetworksForSelectOption");
    if (networkParentTypeInput == "bridge"){
      $("#networkParentRow").hide()
      $("#networkNetworkRow").show()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").hide()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").show()
      $("#networkLimitsIngressRow").show()
      $("#networkLimitsEgressRow").show()
      $("#networkLimitsMaxRow").show()
      $("#networkIpv4AddressRow").show()
      $("#networkIpv6AddressRow").show()
      $("#networkIpv4RoutesRow").show()
      $("#networkIpv6RoutesRow").show()
      $("#networkSecurityMacFilteringRow").show()
      $("#networkSecurityIpv4FilteringRow").show()
      $("#networkSecurityIpv6FilteringRow").show()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").show()
      $("#networkSecurityPortIsolationRow").show()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkParentTypeInput == "macvlan"){
      $("#networkParentRow").hide()
      $("#networkNetworkRow").show()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").hide()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").show()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkParentTypeInput == "ovn"){
      $("#networkParentRow").hide()
      $("#networkNetworkRow").show()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").hide()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").show()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").show()
      $("#networkIpv6AddressRow").show()
      $("#networkIpv4RoutesRow").show()
      $("#networkIpv6RoutesRow").show()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").hide()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()

      $("#networkIpv4RoutesExternalRow").show()
      $("#networkIpv6RoutesExternalRow").show()
      $("#networkSecurityAclsRow").show()
      $("#networkSecurityAclsDefaultIngressActionRow").show()
      $("#networkSecurityAclsDefaultEgressActionRow").show()
      $("#networkSecurityAclsDefaultIngressLoggedRow").show()
      $("#networkSecurityAclsDefaultEgressLoggedRow").show()
    }
    if (networkParentTypeInput == "sriov"){
      $("#networkParentRow").hide()
      $("#networkNetworkRow").show()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").hide()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").show()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
  }

  function changeNicTypeInput(){
    var networkNicTypeInput = $("#networkNicTypeInput").val();
    if (networkNicTypeInput == "bridged"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").show()
      $("#networkLimitsIngressRow").show()
      $("#networkLimitsEgressRow").show()
      $("#networkLimitsMaxRow").show()
      $("#networkIpv4AddressRow").show()
      $("#networkIpv6AddressRow").show()
      $("#networkIpv4RoutesRow").show()
      $("#networkIpv6RoutesRow").show()
      $("#networkSecurityMacFilteringRow").show()
      $("#networkSecurityIpv4FilteringRow").show()
      $("#networkSecurityIpv6FilteringRow").show()
      $("#networkMaasSubnetIpv4Row").show()
      $("#networkMaasSubnetIpv6Row").show()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").show()
      $("#networkSecurityPortIsolationRow").show()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "macvlan"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").show()
      $("#networkMaasSubnetIpv6Row").show()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").show()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "sriov"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").show()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").show()
      $("#networkMaasSubnetIpv6Row").show()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "physical"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").show()
      $("#networkMaasSubnetIpv6Row").show()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").show()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "ipvlan"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").hide()
      $("#networkLimitsIngressRow").hide()
      $("#networkLimitsEgressRow").hide()
      $("#networkLimitsMaxRow").hide()
      $("#networkIpv4AddressRow").show()
      $("#networkIpv6AddressRow").show()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").hide()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").show()
      $("#networkModeRow").show()
      $("#networkIpv4GatewayRow").show()
      $("#networkIpv4HostTableRow").show()
      $("#networkIpv6GatewayRow").show()
      $("#networkIpv6HostTableRow").show()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "p2p"){
      $("#networkParentRow").hide()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").show()
      $("#networkLimitsIngressRow").show()
      $("#networkLimitsEgressRow").show()
      $("#networkLimitsMaxRow").show()
      $("#networkIpv4AddressRow").hide()
      $("#networkIpv6AddressRow").hide()
      $("#networkIpv4RoutesRow").show()
      $("#networkIpv6RoutesRow").show()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").show()
      $("#networkVlanRow").hide()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").hide()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").hide()
      $("#networkIpv4HostTableRow").hide()
      $("#networkIpv6GatewayRow").hide()
      $("#networkIpv6HostTableRow").hide()
      $("#networkIpv4HostAddressRow").hide()
      $("#networkIpv6HostAddressRow").hide()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
    if (networkNicTypeInput == "routed"){
      $("#networkParentRow").show()
      $("#networkNetworkRow").hide()
      $("#networkInterfaceNameRow").show()
      $("#networkMtuRow").show()
      $("#networkHwaddrRow").show()
      $("#networkHostNameRow").show()
      $("#networkLimitsIngressRow").show()
      $("#networkLimitsEgressRow").show()
      $("#networkLimitsMaxRow").show()
      $("#networkIpv4AddressRow").show()
      $("#networkIpv6AddressRow").show()
      $("#networkIpv4RoutesRow").hide()
      $("#networkIpv6RoutesRow").hide()
      $("#networkSecurityMacFilteringRow").hide()
      $("#networkSecurityIpv4FilteringRow").hide()
      $("#networkSecurityIpv6FilteringRow").hide()
      $("#networkMaasSubnetIpv4Row").hide()
      $("#networkMaasSubnetIpv6Row").hide()
      $("#networkBootPriorityRow").hide()
      $("#networkVlanRow").show()
      $("#networkVlanTaggedRow").hide()
      $("#networkSecurityPortIsolationRow").hide()
      $("#networkGvrpRow").show()
      $("#networkModeRow").hide()
      $("#networkIpv4GatewayRow").show()
      $("#networkIpv4HostTableRow").show()
      $("#networkIpv6GatewayRow").show()
      $("#networkIpv6HostTableRow").show()
      $("#networkIpv4HostAddressRow").show()
      $("#networkIpv6HostAddressRow").show()
      $("#networkIpv4RoutesExternalRow").hide()
      $("#networkIpv6RoutesExternalRow").hide()
      $("#networkSecurityAclsRow").hide()
      $("#networkSecurityAclsDefaultIngressActionRow").hide()
      $("#networkSecurityAclsDefaultEgressActionRow").hide()
      $("#networkSecurityAclsDefaultIngressLoggedRow").hide()
      $("#networkSecurityAclsDefaultEgressLoggedRow").hide()
    }
  }

  function addInstanceDiskDevice(){
    var diskNameInput = $("#diskNameInput").val();
    var diskPoolInput = $("#diskPoolInput").val();
    var diskSourceInput = $("#diskSourceInput").val();
    var diskSourceSelectInput = $("#diskSourceSelectInput").val();
    var diskPathInput = $("#diskPathInput").val();
    var diskLimitsReadInput = $("#diskLimitsReadInput").val();
    var diskLimitsWriteInput = $("#diskLimitsWriteInput").val();
    var diskLimitsMaxInput = $("#diskLimitsMaxInput").val();
    var diskRequiredInput = $("#diskRequiredInput").val();
    var diskReadOnlyInput = $("#diskReadOnlyInput").val();
    var diskSizeInput = $("#diskSizeInput").val();
    var diskSizeStateInput = $("#diskSizeStateInput").val();
    var diskRecursiveInput = $("#diskRecursiveInput").val();
    var diskPropagationInput = $("#diskPropagationInput").val();
    var diskShiftInput = $("#diskShiftInput").val();
    var diskRawMountOptionsInput = $("#diskRawMountOptionsInput").val();
    var diskCephUserNameInput = $("#diskCephUserNameInput").val();
    var diskCephClusterNameInput = $("#diskCephClusterNameInput").val();
    var diskBootPriorityInput = $("#diskBootPriorityInput").val();

    if (diskPoolInput != ""){
      diskSourceInput = diskSourceSelectInput
    }

    console.log("Info: adding disk device " + diskNameInput + " to instance " + instanceName);
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + 
    "&name=" + encodeURI(diskNameInput) + 
    "&pool=" + encodeURI(diskPoolInput) + 
    "&source=" + encodeURI(diskSourceInput) + 
    "&path=" + encodeURI(diskPathInput) + 
    "&limits_read=" + encodeURI(diskLimitsReadInput) + 
    "&limits_write=" + encodeURI(diskLimitsWriteInput) + 
    "&limits_max=" + encodeURI(diskLimitsMaxInput) + 
    "&required=" + encodeURI(diskRequiredInput) + 
    "&read_only=" + encodeURI(diskReadOnlyInput) + 
    "&size=" + encodeURI(diskSizeInput) + 
    "&size_state=" + encodeURI(diskSizeStateInput) + 
    "&recursive=" + encodeURI(diskRecursiveInput) + 
    "&propagation=" + encodeURI(diskPropagationInput) + 
    "&shift=" + encodeURI(diskShiftInput) + 
    "&raw_mount_options=" + encodeURI(diskRawMountOptionsInput) + 
    "&ceph_user_name=" + encodeURI(diskCephUserNameInput) + 
    "&ceph_cluster_name=" + encodeURI(diskCephClusterNameInput) + 
    "&boot_priority=" + encodeURI(diskBootPriorityInput) + 
    "&action=addInstanceDiskDevice", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function addInstanceNetworkDevice(){
    var networkNameInput = $("#networkNameInput").val();
    var networkPropertySetInput = $("#networkPropertySetInput").val();
    var networkNicTypeInput = $("#networkNicTypeInput").val();
    var networkParentTypeInput = $("#networkParentTypeInput").val();
    var networkParentInput = $("#networkParentInput").val();
    var networkNetworkInput = $("#networkNetworkInput").val();
    var networkInterfaceNameInput = $("#networkInterfaceNameInput").val();
    var networkMtuInput = $("#networkMtuInput").val();
    var networkModeInput = $("#networkModeInput").val();
    var networkHwaddrInput = $("#networkHwaddrInput").val();
    var networkHostNameInput = $("#networkHostNameInput").val();
    var networkLimitsIngressInput = $("#networkLimitsIngressInput").val();
    var networkLimitsEgressInput = $("#networkLimitsEgressInput").val();
    var networkLimitsMaxInput = $("#networkLimitsMaxInput").val();
    var networkIpv4AddressInput = $("#networkIpv4AddressInput").val();
    var networkIpv4GatewayInput = $("#networkIpv4GatewayInput").val();
    var networkIpv4HostTableInput = $("#networkIpv4HostTableInput").val();
    var networkIpv4HostAddressInput = $("#networkIpv4HostAddressInput").val();
    var networkIpv4RoutesInput = $("#networkIpv4RoutesInput").val();
    var networkIpv4RoutesExternalInput = $("#networkIpv4RoutesExternalInput").val();
    var networkIpv6AddressInput = $("#networkIpv6AddressInput").val();
    var networkIpv6GatewayInput = $("#networkIpv6GatewayInput").val();
    var networkIpv6HostTableInput = $("#networkIpv6HostTableInput").val();
    var networkIpv6HostAddressInput = $("#networkIpv6HostAddressInput").val();
    var networkIpv6RoutesInput = $("#networkIpv6RoutesInput").val();
    var networkIpv6RoutesExternalInput = $("#networkIpv6RoutesExternalInput").val();
    var networkSecurityMacFilteringInput = $("#networkSecurityMacFilteringInput").val();
    var networkSecurityIpv4FilteringInput = $("#networkSecurityIpv4FilteringInput").val();
    var networkSecurityIpv6FilteringInput = $("#networkSecurityIpv6FilteringInput").val();
    var networkMaasSubnetIpv4Input = $("#networkMaasSubnetIpv4Input").val();
    var networkMaasSubnetIpv6Input = $("#networkMaasSubnetIpv6Input").val();
    var networkBootPriorityInput = $("#networkBootPriorityInput").val();
    var networkVlanInput = $("#networkVlanInput").val();
    var networkVlanTaggedInput = $("#networkVlanTaggedInput").val();
    var networkSecurityPortIsolationInput = $("#networkSecurityPortIsolationInput").val();
    var networkGvrpInput = $("#networkGvrpInput").val();
    var networkSecurityAclsInput = $("#networkSecurityAclsInput").val();
    var networkSecurityAclsDefaultIngressActionInput = $("#networkSecurityAclsDefaultIngressActionInput").val();
    var networkSecurityAclsDefaultEgressActionInput = $("#networkSecurityAclsDefaultEgressActionInput").val();
    var networkSecurityAclsDefaultIngressLoggedInput = $("#networkSecurityAclsDefaultIngressLoggedInput").val();
    var networkSecurityAclsDefaultEgressLoggedInput = $("#networkSecurityAclsDefaultEgressLoggedInput").val();

    console.log("Info: adding network device " + networkNameInput + " to instance " + instanceName);
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + 
    "&name=" + encodeURI(networkNameInput) +
    "&property_set=" + encodeURI(networkPropertySetInput) +
    "&nictype=" + encodeURI(networkNicTypeInput) + 
    "&parent_type=" + encodeURI(networkParentTypeInput) + 
    "&parent=" + encodeURI(networkParentInput) + 
    "&network=" + encodeURI(networkNetworkInput) + 
    "&interface_name=" + encodeURI(networkInterfaceNameInput) + 
    "&mtu=" + encodeURI(networkMtuInput) + 
    "&mode=" + encodeURI(networkModeInput) + 
    "&hwaddr=" + encodeURI(networkHwaddrInput) + 
    "&host_name=" + encodeURI(networkHostNameInput) + 
    "&limits_ingress=" + encodeURI(networkLimitsIngressInput) + 
    "&limits_egress=" + encodeURI(networkLimitsEgressInput) + 
    "&limits_max=" + encodeURI(networkLimitsMaxInput) + 
    "&ipv4_address=" + encodeURI(networkIpv4AddressInput) + 
    "&ipv4_gateway=" + encodeURI(networkIpv4GatewayInput) + 
    "&ipv4_host_table=" + encodeURI(networkIpv4HostTableInput) + 
    "&ipv4_host_address=" + encodeURI(networkIpv4HostAddressInput) + 
    "&ipv4_routes=" + encodeURI(networkIpv4RoutesInput) + 
    "&ipv4_routes_external=" + encodeURI(networkIpv4RoutesExternalInput) + 
    "&ipv6_address=" + encodeURI(networkIpv6AddressInput) + 
    "&ipv6_gateway=" + encodeURI(networkIpv6GatewayInput) + 
    "&ipv6_host_table=" + encodeURI(networkIpv6HostTableInput) + 
    "&ipv6_host_address=" + encodeURI(networkIpv6HostAddressInput) + 
    "&ipv6_routes=" + encodeURI(networkIpv6RoutesInput) + 
    "&ipv6_routes_external=" + encodeURI(networkIpv6RoutesExternalInput) + 
    "&security_mac_filtering=" + encodeURI(networkSecurityMacFilteringInput) + 
    "&security_ipv4_filtering=" + encodeURI(networkSecurityIpv4FilteringInput) + 
    "&security_ipv6_filtering=" + encodeURI(networkSecurityIpv6FilteringInput) + 
    "&maas_subnet_ipv4=" + encodeURI(networkMaasSubnetIpv4Input) + 
    "&maas_subnet_ipv6=" + encodeURI(networkMaasSubnetIpv6Input) + 
    "&boot_priority=" + encodeURI(networkBootPriorityInput) + 
    "&vlan=" + encodeURI(networkVlanInput) + 
    "&vlan_tagged=" + encodeURI(networkVlanTaggedInput) + 
    "&security_port_isolation=" + encodeURI(networkSecurityPortIsolationInput) + 
    "&gvrp=" + encodeURI(networkGvrpInput) + 
    "&security_acls=" + encodeURI(networkSecurityAclsInput) + 
    "&security_acls_default_ingress_action=" + encodeURI(networkSecurityAclsDefaultIngressActionInput) + 
    "&security_acls_default_egress_action=" + encodeURI(networkSecurityAclsDefaultEgressActionInput) + 
    "&security_acls_default_ingress_logged=" + encodeURI(networkSecurityAclsDefaultIngressLoggedInput) + 
    "&security_acls_default_egress_logged=" + encodeURI(networkSecurityAclsDefaultEgressLoggedInput) + 
    "&action=addInstanceNetworkDevice", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function addInstanceProxyDevice(){
    var proxyDeviceNameInput = $("#proxyDeviceNameInput").val();
    var proxyListenInput = $("#proxyListenInput").val();
    var proxyConnectInput = $("#proxyConnectInput").val();
    var proxyBindInput = $("#proxyBindInput").val();
    var proxyUidInput = $("#proxyUidInput").val();
    var proxyGidInput = $("#proxyGidInput").val();
    var proxyModeInput = $("#proxyModeInput").val();
    var proxyNatInput = $("#proxyNatInput").val();
    var proxyProxyProtocolInput = $("#proxyProxyProtocolInput").val();
    var proxySecurityUidInput = $("#proxySecurityUidInput").val();
    var proxySecurityGidInput = $("#proxySecurityGidInput").val();

    console.log("Info: adding proxy device " + proxyDeviceNameInput + " to instance " + instanceName);
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(proxyDeviceNameInput) + "&listen=" + encodeURI(proxyListenInput) + "&connect=" + encodeURI(proxyConnectInput) + "&bind=" + encodeURI(proxyBindInput) + "&uid=" + encodeURI(proxyUidInput) + "&gid=" + encodeURI(proxyGidInput) + "&mode=" + encodeURI(proxyModeInput) + "&nat=" + encodeURI(proxyNatInput) + "&proxy_protocol=" + encodeURI(proxyProxyProtocolInput) + "&security_uid=" + encodeURI(proxySecurityUidInput) + "&security_gid=" + encodeURI(proxySecurityGidInput) + "&action=addInstanceProxyDevice", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function removeInstanceDevice(deviceName){
    console.log("Info: removing device " + deviceName + " from instance " + instanceName);
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&name=" + encodeURI(deviceName) + "&action=removeInstanceDevice", function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  }

  function editInstanceJson(){
    console.log("Info: viewing instance " + instanceName);
    $.get("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=loadInstanceInformation", function (data) {
      //Sync operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      $("#instanceNameEditInput").text("Name: " + instanceName);
      $("#jsonEditInput").val(JSON.stringify(operationData.metadata, null, 2));
      $("#editInstanceModal").modal('show');
    });
  }

  function updateInstanceJson(){
    var instanceUpdateJSON = $("#jsonEditInput").val();
    console.log("Info: updating instance " + instanceName);
    $.post("./php/lxd/instances.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=updateInstanceInformation", {json: instanceUpdateJSON},  function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });
  

  }

  function convertArrayBuffer2String(buf) {
    var encoding = 'utf8';
    var decoder = new TextDecoder(encoding);
	  var str = decoder.decode(buf);
    return str
  }

  function convertString2ArrayBuffer(str) {
    var buf = new ArrayBuffer(str.length);
    var bufView = new Uint8Array(buf);
    for (var i=0, strLen=str.length; i < strLen; i++) {
      bufView[i] = str.charCodeAt(i);
    }
    return buf;
  }

  function establishInstanceWebSocketConsoleConnection() {
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=retrieveHostAndPort", function (data) {
      var operationData = JSON.parse(data);
      console.log(operationData);
      var host = operationData.host;
      var port = operationData.port;

      //Check to see if we can connect to the LXD remote host over a secure connection
      fetch('https://' + host + ':' + port + '/1.0', { mode: 'no-cors' })
      .then(response => {
        //If we made it here then the self-signed LXD certificate would have been already trusted by the user's browser we can setup a secure websocket connection
        $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=establishInstanceWebSocketConsoleConnection", function (data) {
          var operationData = JSON.parse(data);
          var operation = operationData.operation;
          var consoleControlURL = "wss://" + host + ":" + port + operation + "/websocket?secret=" + operationData.control;
          var consoleDataURL = "wss://" + host + ":" + port + operation + "/websocket?secret=" + operationData.secret;

          if(operation == "" && operationData.secret == ""){
            alert("Unable to connect via websocket");
            return;
          }
          
          //Create a new "control" websocket
          consoleControlSocket = new WebSocket(consoleControlURL);

          //Listen for "control" websocket errors
          consoleControlSocket.onerror = function (e) {
            console.log("There was a WebSocket error: " + e);
          }

          //Listen for "control" websocket opening connection
          consoleControlSocket.onopen = function (e) {
            console.log( "Console Control WebSocket ReadyState: " + consoleControlSocket.readyState ); 
          };
  
          //Listen for "control" websocket messages
          consoleControlSocket.onmessage = function (e) {      
            if (e.data instanceof ArrayBuffer) {
              if (convertArrayBuffer2String(e.data) != null){
                consoleTerminal.write(convertArrayBuffer2String(e.data));
              }
            }
          };

          //Listen for "control" websocket closing
          consoleControlSocket.onclose = function (e) {
            console.log(e);
          };

          //Create a new "data" websocket
          consoleDataSocket = new WebSocket(consoleDataURL);
            
          //Listen for "data" websocket errors
          consoleDataSocket.onerror = function (e) {
            console.log("There was a WebSocket error: " + e);
          }

          //Listen for "data" websocket opening connection
          consoleDataSocket.onopen = function (e) {
            //Set binaryType to ArrayBuffer. This should be default value
            consoleDataSocket.binaryType = 'arraybuffer';
            
            console.log( "Console Data WebSocket ReadyState: " + consoleDataSocket.readyState );
            consoleTerminal.write("--- Encrypted Connection Opened via WebSocket --- \r\n");

            //Send return to show login screen on console connections
            setTimeout(() => { consoleDataSocket.send(convertString2ArrayBuffer('\r')); }, 1000);
            
            //Switch console action buttons
            $("#startConsoleButton").hide();
            $("#stopConsoleButton").show();
          };
      
          //Listen for "data" websocket messages
          consoleDataSocket.onmessage = function (e) {      
            if (e.data instanceof ArrayBuffer) {
              if (convertArrayBuffer2String(e.data) != null){
                consoleTerminal.write(convertArrayBuffer2String(e.data));
              }
            }
          };

          //Listen for "data" websocket closing
          consoleDataSocket.onclose = function (e) {
            console.log(e);
            consoleTerminal.write("\r\n--- Encrypted Connection Closed ---\r\n");
            $("#stopConsoleButton").hide();
            $("#startConsoleButton").show();
          };

        });

      })
      .catch((error) => {
        console.log("Error: ", error)
        //If we make it here then we had an error connection to LXD server. Most likely the Self-Signed Certificate is not yet trusted by the user's browser
        data = 'There was an error connecting to your LXD server. <br />The LXD server may be using a self-signed certificate. <br />Visit <a href="https://' + host + ':' + port + '" target="_blank">https://' + host + ':' + port +'</a> to accept the certificate if not yet trusted.';
        $("#webSocketConnectionError").html(data);
        $('#webSocketConnectionErrorModal').modal('show');
      })

    });

  }

  function establishInstanceWebSocketExecConnection() {
    $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&action=retrieveHostAndPort", function (data) {
      var operationData = JSON.parse(data);
      console.log(operationData);
      var host = operationData.host;
      var port = operationData.port;

      //Check to see if we can connect to the LXD remote host over a secure connection
      fetch('https://' + host + ':' + port + '/1.0', { mode: 'no-cors' })
      .then(response => {
        //If we made it here then the self-signed LXD certificate would have been already trusted by the user's browser we can setup a secure websocket connection
        var execShellInput = $("#execShellInput").val();
        $.get("./php/lxd/instances-single.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&instance=" + encodeURI(instanceName) + "&shell=" + encodeURI(execShellInput) + "&action=establishInstanceWebSocketExecConnection", function (data) {
          var operationData = JSON.parse(data);
          var operation = operationData.operation;
          var execControlURL = "wss://" + host + ":" + port + operation + "/websocket?secret=" + operationData.control;
          var execDataURL = "wss://" + host + ":" + port + operation + "/websocket?secret=" + operationData.secret;

          if(operation == "" && operationData.secret == ""){
            alert("Unable to connect via websocket");
            return;
          }
          
          //Create a new "control" websocket
          execControlSocket = new WebSocket(execControlURL);

          //Listen for "control" websocket errors
          execControlSocket.onerror = function (e) {
            console.log("There was a WebSocket error: " + e);
          }

          //Listen for "control" websocket opening connection
          execControlSocket.onopen = function (e) {
            console.log( "Exec Control WebSocket ReadyState: " + execControlSocket.readyState ); 
          };
  
          //Listen for "control" websocket messages
          execControlSocket.onmessage = function (e) {      
            if (e.data instanceof ArrayBuffer) {
              if (convertArrayBuffer2String(e.data) != null){
                execTerminal.write(convertArrayBuffer2String(e.data));
              }
            }
          };

          //Listen for "control" websocket closing
          execControlSocket.onclose = function (e) {
            console.log(e);
          };

          //Create a new "data" websocket
          execDataSocket = new WebSocket(execDataURL);
            
          //Listen for "data" websocket errors
          execDataSocket.onerror = function (e) {
            console.log("There was a WebSocket error: " + e);
          }

          //Listen for "data" websocket opening connection
          execDataSocket.onopen = function (e) {
            //Set binaryType to ArrayBuffer. This should be default value
            execDataSocket.binaryType = 'arraybuffer';
            
            console.log( "Exec Data WebSocket ReadyState: " + execDataSocket.readyState );
            execTerminal.write("--- Encrypted Connection Opened via WebSocket --- \r\n");

            //Switch console action buttons
            $("#startExecButton").hide();
            $("#stopExecButton").show();
          };
      
          //Listen for "data" websocket messages
          execDataSocket.onmessage = function (e) {      
            if (e.data instanceof ArrayBuffer) {
              if (convertArrayBuffer2String(e.data) != null){
                execTerminal.write(convertArrayBuffer2String(e.data));
              }
            }
          };

          //Listen for "data" websocket closing
          execDataSocket.onclose = function (e) {
            console.log(e);
            execTerminal.write("\r\n--- Encrypted Connection Closed ---\r\n");
            $("#stopExecButton").hide();
            $("#startExecButton").show();
          };

        });

      })
      .catch((error) => {
        console.log("Error: ", error)
        //If we make it here then we had an error connection to LXD server. Most likely the Self-Signed Certificate is not yet trusted by the user's browser
        data = 'There was an error connecting to your LXD server. <br />The LXD server may be using a self-signed certificate. <br />Visit <a href="https://' + host + ':' + port + '" target="_blank">https://' + host + ':' + port +'</a> to accept the certificate if not yet trusted.';
        $("#webSocketConnectionError").html(data);
        $('#webSocketConnectionErrorModal').modal('show');
      })

    });

  }

  function closeWebSocketConsoleConnection() {
    //Closing the "control" websocket for console operations will stop the operation without crashing existing host's WebSockets.
    consoleControlSocket.close();
    consoleDataSocket.close();
  }

  function closeWebSocketExecConnection() {
    //Sending Ctrl+d (exit) three times to back out of potential nested shells or logins up to three deep. If not logged out, WebSocket operation may continue to run.
    execDataSocket.send(convertString2ArrayBuffer('\04 \r \04 \r \04 \r'))

    //Closing the "control" websocket for console operations will stop the operation without crashing existing host WebSockets.
    execControlSocket.close();
    execDataSocket.close();
  }

  function editBootConfiguration() {
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);

        $("#bootAutostartInput").val(data.bootAutostart)
        $("#bootAutostartDelayInput").val(data.bootAutostartDelay)
        $("#bootAutostartPriorityInput").val(data.bootAutostartPriority)
        $("#bootHostShutdownTimeoutInput").val(data.bootHostShutdownTimeout)
        $("#bootStopPriorityInput").val(data.bootStopPriority)

        $("#editBootConfigurationModal").modal('show');

    });

  }

  function updateBootConfiguration() {
    bootAutostart = $("#bootAutostartInput").val()
    bootAutostartDelay = $("#bootAutostartDelayInput").val()
    bootAutostartPriority = $("#bootAutostartPriorityInput").val()
    bootHostShutdownTimeout = $("#bootHostShutdownTimeoutInput").val()
    bootStopPriority = $("#bootStopPriorityInput").val()
    $.post("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=updateInstanceBootConfiguration", {boot_autostart: encodeURI(bootAutostart), boot_autostart_delay: encodeURI(bootAutostartDelay), boot_autostart_priority: encodeURI(bootAutostartPriority), boot_host_shutdown_timeout: encodeURI(bootHostShutdownTimeout), boot_stop_priority: encodeURI(bootStopPriority)}, function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });

  }

  function editCpuLimits() {
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);

        $("#limitsCpuInput").val(data.limitsCpu)
        $("#limitsCpuAllowanceInput").val(data.limitsCpuAllowance)
        $("#limitsCpuPriorityInput").val(data.limitsCpuPriority)

        $("#editCpuLimitsModal").modal('show');

    });

  }

  function updateCpuLimits() {
    limitsCpu = $("#limitsCpuInput").val()
    limitsCpuAllowance = $("#limitsCpuAllowanceInput").val()
    limitsCpuPriority = $("#limitsCpuPriorityInput").val()
    $.post("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=updateInstanceCpuLimits", {limits_cpu: encodeURI(limitsCpu), limits_cpu_allowance: encodeURI(limitsCpuAllowance), limits_cpu_priority: encodeURI(limitsCpuPriority)}, function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });

  }

  function editMemoryLimits() {
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);

        $("#limitsMemoryInput").val(data.limitsMemory)
        $("#limitsMemoryEnforceInput").val(data.limitsMemoryEnforce)
        $("#limitsMemoryHugepagesInput").val(data.limitsMemoryHugepages)
        $("#limitsMemorySwapInput").val(data.limitsMemorySwap)
        $("#limitsMemorySwapPriorityInput").val(data.limitsMemorySwapPriority)

        $("#editMemoryLimitsModal").modal('show');

    });

  }

  function updateMemoryLimits() {
    limitsMemory = $("#limitsMemoryInput").val()
    limitsMemoryEnforce = $("#limitsMemoryEnforceInput").val()
    limitsMemoryHugepages = $("#limitsMemoryHugepagesInput").val()
    limitsMemorySwap = $("#limitsMemorySwapInput").val()
    limitsMemorySwapPriority = $("#limitsMemorySwapPriorityInput").val()
    $.post("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=updateInstanceMemoryLimits", {limits_memory: encodeURI(limitsMemory), limits_memory_enforce: encodeURI(limitsMemoryEnforce), limits_memory_hugepages: encodeURI(limitsMemoryHugepages), limits_memory_swap: encodeURI(limitsMemorySwap), limits_memory_swap_priority: encodeURI(limitsMemorySwapPriority)}, function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });

  }

  function editSecurityConfiguration() {
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);

        $("#securityNestingInput").val(data.securityNesting)
        $("#securityPrivilegedInput").val(data.securityPrivileged)
        $("#securityProtectionDeleteInput").val(data.securityProtectionDelete)

        $("#editSecurityConfigurationModal").modal('show');

    });

  }

  function updateSecurityConfiguration() {
    securityNesting = $("#securityNestingInput").val()
    securityPrivileged = $("#securityPrivilegedInput").val()
    securityProtectionDelete = $("#securityProtectionDeleteInput").val()
    $.post("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=updateInstanceSecurityConfiguration", {security_nesting: encodeURI(securityNesting), security_privileged: encodeURI(securityPrivileged), security_protection_delete: encodeURI(securityProtectionDelete)}, function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });

  }

  function editSnapshotConfiguration() {
    $.get("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=displayInstanceInfo", function (data) {
        data = JSON.parse(data);

        $("#snapshotsScheduleInput").val(data.snapshotsSchedule)
        $("#snapshotsScheduleStoppedInput").val(data.snapshotsScheduleStopped)
        $("#snapshotsPatternInput").val(data.snapshotsPattern)
        $("#snapshotsExpiryInput").val(data.snapshotsExpiry)

        $("#editSnapshotConfigurationModal").modal('show');
    });

  }

  function updateSnapshotConfiguration() {
    snapshotsSchedule = $("#snapshotsScheduleInput").val()
    snapshotsScheduleStopped = $("#snapshotsScheduleStoppedInput").val()
    snapshotsPattern = $("#snapshotsPatternInput").val()
    snapshotsExpiry = $("#snapshotsExpiryInput").val()
    $.post("./php/lxd/instances-single.php?instance=" + encodeURI(instanceName) + "&remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=updateInstanceSnapshotConfiguration",{snapshots_schedule: encodeURI(snapshotsSchedule), snapshots_schedule_stopped: encodeURI(snapshotsScheduleStopped), snapshots_pattern: encodeURI(snapshotsPattern), snapshots_expiry: encodeURI(snapshotsExpiry) }, function (data) {
      //Async operation type
      var operationData = JSON.parse(data);
      console.log(operationData);
      if (operationData.error_code >= 400){
        alert(operationData.error);
      }
      operationStatusCheck();
      setTimeout(() => { reloadPageContent(); }, 1000);
    });

  }

  $(document).ready(function(){

    //Check Authorization
    $.get("./php/aaa/authentication.php?action=validateAuthentication", function (data) {
      operationData = JSON.parse(data);
      if (operationData.status_code != 200) {
        console.log(operationData);
        window.location = './index.html'
      }
    });
    
    //Load in the sidebar
    $("#sidebarLinks").load("./sidebar.html");

    //Setup Page Breadcrumb Links/Information
    $('#remoteBreadCrumb').load("./php/lxd/remote-breadcrumb.php?remote=" + encodeURI(remoteId));
    $('#remoteBreadCrumb').attr("href", "remotes-single.html?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName));
    $('#instancesBreadCrumb').text("instances");
    $('#instancesBreadCrumb').attr("href", "instances.html?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName));
    $('#instanceBreadCrumb').text(instanceName);

    //Load the card contents
    loadPageContent();

    $("#remoteListNav").load("./php/lxd/remotes.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listRemotesForTopNavigation");
    $("#projectListNav").load("./php/lxd/projects.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listProjectsForTopNavigation");
    
    //Populate the select options fields used in modals
    $("#selectProfileInput").load("./php/lxd/profiles.php?remote=" + encodeURI(remoteId) + "&project=" + encodeURI(projectName) + "&action=listProfilesForSelectOption");
    $("#selectClusterInput").load("./php/lxd/cluster-members.php?remote=" + encodeURI(remoteId) + "&action=listClusterMembersForSelectOption");

    //Load the about info for the about modal
    $.get("./about.html", function (data) {
      $("#about").html(data);
    });

    //When tab changes, set active tab for content refresh
    $('a[data-toggle="pill"]').on('shown.bs.tab', function (e) {
      activeTab = $(e.target).attr("href") // activated tab
    });

    //Initialize xterm for Console
    consoleTerminal = new Terminal({
      cursorBlink: "block"
    });

    //Setup listener for Console terminal
    consoleTerminal.onData( (data) => {
      if (consoleDataSocket.readyState === 1) {
        consoleDataSocket.send(convertString2ArrayBuffer(data))
      }
    });

    //Initialize xterm for Exec
    execTerminal = new Terminal({
      cursorBlink: "block"
    });

    //Setup listener for Exec terminal
    execTerminal.onData( (data) => {
      if (execDataSocket.readyState === 1) {
        execDataSocket.send(convertString2ArrayBuffer(data))
      }
    });

    //Open Console terminal
    consoleTerminal.open(document.getElementById("terminal-console"));

    //Open Exec terminal
    execTerminal.open(document.getElementById("terminal-exec"));


    //Add Event Listener for page unloading to close WebSocket connections
    window.addEventListener("beforeunload", function () {
      //Check to see if the Console WebSocket was initiated
      if (typeof consoleDataSocket == "object"){
        if(consoleDataSocket.readyState == WebSocket.OPEN){
          closeWebSocketConsoleConnection()
        }
      }
      //Check to see if the Exec WebSocket was initiated
      if (typeof execDataSocket == "object"){
        if(execDataSocket.readyState == WebSocket.OPEN){
          closeWebSocketExecConnection();
        }
      }
    });


  });

</script>

</html>